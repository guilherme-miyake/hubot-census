{"_id":"hubot-mockadapter","_rev":"2-bcf9e577ff6213e4429791765db978af","name":"hubot-mockadapter","description":"A mock Adapter written in ES6(ES2015) for unit testing Hubot and Webbybot scripts","dist-tags":{"latest":"2.0.2"},"versions":{"2.0.0":{"name":"hubot-mockadapter","version":"2.0.0","description":"A mock Adapter written in ES6 for unit testing Hubot and Webbybot scripts","main":"dist/index.js","scripts":{"prebuild":"rm -rf dist && mkdir dist","build":"babel index.js -o dist/index.js","lint":"eslint index.js"},"keywords":["hubot","webbybot"],"author":{"name":"webby team"},"repository":{"type":"git","url":"git+ssh://git@github.com/gasolin/webbybot-mock-adapter.git"},"bugs":{"url":"https://github.com/gasolin/webbybot-mock-adapter/issues"},"homepage":"https://github.com/gasolin/webbybot-mock-adapter","dependencies":{"babel-cli":"^6.6.5","babel-core":"^6.7.2","babel-eslint":"^5.0.0","babel-plugin-add-module-exports":"^0.1.2","babel-preset-es2015":"^6.6.0","eslint":"~2.2.0","eslint-config-defaults":"^9.0.0","webbybot":"^0.2.1"},"license":"MIT","gitHead":"6297ef55b48498cdb51e9562c98de55dd718ad17","_id":"hubot-mockadapter@2.0.0","_shasum":"b30ca646ed4eda0ef5975e980ba55119c3d80bb4","_from":".","_npmVersion":"2.14.7","_nodeVersion":"4.2.2","_npmUser":{"name":"gasolin","email":"gasolin@gmail.com"},"dist":{"shasum":"b30ca646ed4eda0ef5975e980ba55119c3d80bb4","tarball":"http://registry.npmjs.org/hubot-mockadapter/-/hubot-mockadapter-2.0.0.tgz"},"maintainers":[{"name":"gasolin","email":"gasolin@gmail.com"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/hubot-mockadapter-2.0.0.tgz_1458375730311_0.4854661598801613"}},"2.0.1":{"name":"hubot-mockadapter","version":"2.0.1","description":"A mock Adapter written in ES6 for unit testing Hubot and Webbybot scripts","main":"dist/index.js","scripts":{"prebuild":"rm -rf dist && mkdir dist","build":"babel index.js -o dist/index.js","lint":"eslint index.js"},"keywords":["hubot","webbybot"],"author":{"name":"webby team"},"repository":{"type":"git","url":"git+ssh://git@github.com/gasolin/webbybot-mock-adapter.git"},"bugs":{"url":"https://github.com/gasolin/webbybot-mock-adapter/issues"},"homepage":"https://github.com/gasolin/webbybot-mock-adapter","dependencies":{"babel-cli":"^6.6.5","babel-core":"^6.7.2","babel-eslint":"^5.0.0","babel-plugin-add-module-exports":"^0.1.2","babel-preset-es2015":"^6.6.0","eslint":"~2.2.0","eslint-config-defaults":"^9.0.0","webbybot":"^0.2.1"},"license":"MIT","gitHead":"d60d34e6c5e0411872524f2434e4b7119e7ef205","_id":"hubot-mockadapter@2.0.1","_shasum":"5d735b2c0e3a11f65bec9f3fbfbd227262d2acba","_from":".","_npmVersion":"2.14.7","_nodeVersion":"4.2.2","_npmUser":{"name":"gasolin","email":"gasolin@gmail.com"},"dist":{"shasum":"5d735b2c0e3a11f65bec9f3fbfbd227262d2acba","tarball":"http://registry.npmjs.org/hubot-mockadapter/-/hubot-mockadapter-2.0.1.tgz"},"maintainers":[{"name":"gasolin","email":"gasolin@gmail.com"}],"_npmOperationalInternal":{"host":"packages-13-west.internal.npmjs.com","tmp":"tmp/hubot-mockadapter-2.0.1.tgz_1458377077285_0.9732809353154153"}},"2.0.2":{"name":"hubot-mockadapter","version":"2.0.2","description":"A mock Adapter written in ES6(ES2015) for unit testing Hubot and Webbybot scripts","main":"dist/index.js","scripts":{"prebuild":"rm -rf dist && mkdir dist","build":"babel index.js -o dist/index.js","lint":"eslint index.js"},"keywords":["hubot","webbybot"],"author":{"name":"webby team"},"repository":{"type":"git","url":"git+ssh://git@github.com/gasolin/webbybot-mock-adapter.git"},"bugs":{"url":"https://github.com/gasolin/webbybot-mock-adapter/issues"},"homepage":"https://github.com/gasolin/webbybot-mock-adapter","dependencies":{"babel-cli":"^6.6.5","babel-core":"^6.7.2","babel-eslint":"^5.0.0","babel-plugin-add-module-exports":"^0.1.2","babel-preset-es2015":"^6.6.0","eslint":"~2.2.0","eslint-config-defaults":"^9.0.0","webbybot":"^0.2.1"},"license":"MIT","gitHead":"d60d34e6c5e0411872524f2434e4b7119e7ef205","_id":"hubot-mockadapter@2.0.2","_shasum":"a0b48a0a2515ece3cec32079a62fee4805afad27","_from":".","_npmVersion":"2.14.7","_nodeVersion":"4.2.2","_npmUser":{"name":"gasolin","email":"gasolin@gmail.com"},"dist":{"shasum":"a0b48a0a2515ece3cec32079a62fee4805afad27","tarball":"http://registry.npmjs.org/hubot-mockadapter/-/hubot-mockadapter-2.0.2.tgz"},"maintainers":[{"name":"gasolin","email":"gasolin@gmail.com"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/hubot-mockadapter-2.0.2.tgz_1458407845577_0.8068692297674716"}}},"readme":"# hubot-mockadapter\n\nmock adapter for unit-testing Webbybot and Hubot\n\n[![Dependency Status](https://david-dm.org/gasolin/hubot-mockadapter.svg)](https://david-dm.org/gasolin/hubot-mockadapter) [![npm](https://img.shields.io/npm/v/hubot-mockadapter.svg)](https://www.npmjs.com/package/hubot-mockadapter)\n\nRewrote from [hubot-mock-adapter](https://github.com/blalor/hubot-mock-adapter)\n\nAn `Adapter` implementation could be spied on. For writing unit tests for Webbybot and Hubot scripts.\n\n## example usage\n\nLet's assume you've got a really simple script, like this:\n\n```js\nmodule.exports = function(robot) {\n  robot.hear(/Computer!/, function(msg) {\n      msg.reply(\"Why hello there! (ticker tape, ticker tape)\");\n  });\n};\n```\n\nYou want to test this, of course.  So create a Mocha test:\n\n```js\nvar expect = require(\"chai\").expect;\nvar path   = require(\"path\");\n\nvar Robot       = require(\"hubot/src/robot\");\nvar TextMessage = require(\"hubot/src/message\").TextMessage;\n\ndescribe(\"Eddie the shipboard computer\", function() {\n    var robot;\n    var user;\n    var adapter;\n\n    beforeEach(function(done) {\n        // create new robot, without http, using the mock adapter\n        robot = new Robot(null, \"mockadapter\", false, \"Eddie\");\n\n        robot.adapter.on(\"connected\", function() {\n            // only load scripts we absolutely need, like auth.coffee\n            process.env.HUBOT_AUTH_ADMIN = \"1\";\n            robot.loadFile(\n                path.resolve(\n                    path.join(\"node_modules/hubot/src/scripts\")\n                ),\n                \"auth.coffee\"\n            );\n\n            // load the module under test and configure it for the\n            // robot.  This is in place of external-scripts\n            require(\"../index\")(robot);\n\n            // create a user\n            user = robot.brain.userForId(\"1\", {\n                name: \"mocha\",\n                room: \"#mocha\"\n            });\n\n            adapter = robot.adapter;\n\n            done();\n        });\n\n        robot.run();\n    });\n\n    afterEach(function() {\n        robot.shutdown();\n    });\n\n    it(\"responds when greeted\", function(done) {\n        // here's where the magic happens!\n        adapter.on(\"reply\", function(envelope, strings) {\n            expect(strings[0]).match(/Why hello there/);\n\n            done();\n        });\n\n        adapter.receive(new TextMessage(user, \"Computer!\"));\n    });\n});\n```\n\nYou'll need `devDependencies` something like this in your `package.json`:\n\n```js\n\"devDependencies\": {\n  \"chai\": \"~1.9.0\",\n  \"hubot-mockadapter\": \"~1.0.0\",\n  \"mocha\": \"~1.17.1\",\n  \"webbybot\": \"^0.2.1\",\n  \"sinon\": \"~1.9.0\"\n}\n```\n\nThat's (almost) all there is to it!\n\n## firing up Mocha\n\nAssuming you're using [`mocha`][mocha] to run your tests, and your\ntests are in `test/`. add a `test` script in your `package.json`:\n\n```js\n\"scripts\": {\n  \"test\": \"mocha --compilers js:babel-register\"\n}\n```\n\nThen you can use `npm test` to run your tests!\n\n[mocha]: https://github.com/mhevery/jasmine-node\n","maintainers":[{"name":"gasolin","email":"gasolin@gmail.com"}],"time":{"modified":"2016-03-19T17:17:26.042Z","created":"2016-03-19T08:22:10.762Z","2.0.0":"2016-03-19T08:22:10.762Z","2.0.1":"2016-03-19T08:44:37.730Z","2.0.2":"2016-03-19T17:17:26.042Z"},"homepage":"https://github.com/gasolin/webbybot-mock-adapter","keywords":["hubot","webbybot"],"repository":{"type":"git","url":"git+ssh://git@github.com/gasolin/webbybot-mock-adapter.git"},"author":{"name":"webby team"},"bugs":{"url":"https://github.com/gasolin/webbybot-mock-adapter/issues"},"license":"MIT","readmeFilename":"README.md"}
