{"_id":"hubot-perforce","_rev":"2-680f6c1b87bb6ea249c188761e816fa2","name":"hubot-perforce","description":"Hubot script for interacting with Perforce","dist-tags":{"latest":"0.1.3"},"versions":{"0.1.0":{"name":"hubot-perforce","description":"Hubot script for interacting with Perforce","version":"0.1.0","homepage":"https://github.com/mdouglass/hubot-perforce","author":{"name":"Matthew Douglass","email":"matthew+npm@douglasstribe.com"},"license":"MIT","keywords":["hubot","hubot-scripts","perforce","p4"],"repository":{"type":"git","url":"https://github.com/mdouglass/hubot-perforce.git"},"bugs":{"url":"https://github.com/mdouglass/hubot-perforce/issues"},"dependencies":{"coffee-script":"~1.6"},"devDependencies":{"mocha":"*","chai":"*","sinon-chai":"*","sinon":"*"},"main":"index.coffee","scripts":{"test":"script/test"},"gitHead":"f9a100318ba21a31faa6c1b35bfc1ccb2e661133","_id":"hubot-perforce@0.1.0","_shasum":"991fe4187392fcdfabdb2df87bfad3188a05ea64","_from":".","_npmVersion":"2.1.6","_nodeVersion":"0.10.33","_npmUser":{"name":"mdouglass","email":"matthew+npm@douglasstribe.com"},"maintainers":[{"name":"mdouglass","email":"matthew+npm@douglasstribe.com"}],"dist":{"shasum":"991fe4187392fcdfabdb2df87bfad3188a05ea64","tarball":"http://registry.npmjs.org/hubot-perforce/-/hubot-perforce-0.1.0.tgz"}},"0.1.1":{"name":"hubot-perforce","description":"Hubot script for interacting with Perforce","version":"0.1.1","homepage":"https://github.com/mdouglass/hubot-perforce","author":{"name":"Matthew Douglass","email":"matthew+npm@douglasstribe.com"},"license":"MIT","keywords":["hubot","hubot-scripts","perforce","p4"],"repository":{"type":"git","url":"https://github.com/mdouglass/hubot-perforce.git"},"bugs":{"url":"https://github.com/mdouglass/hubot-perforce/issues"},"dependencies":{"coffee-script":"~1.6"},"devDependencies":{"mocha":"*","chai":"*","sinon-chai":"*","sinon":"*"},"main":"index.coffee","scripts":{"test":"script/test"},"gitHead":"3f16a87074cd42e4000f178f1df3a1ae842ff4fc","_id":"hubot-perforce@0.1.1","_shasum":"9e225d391f8f584f9ef1130712d2a71a34eec4ff","_from":".","_npmVersion":"2.1.7","_nodeVersion":"0.10.33","_npmUser":{"name":"mdouglass","email":"msed.npm@douglasstribe.com"},"maintainers":[{"name":"mdouglass","email":"matthew+npm@douglasstribe.com"}],"dist":{"shasum":"9e225d391f8f584f9ef1130712d2a71a34eec4ff","tarball":"http://registry.npmjs.org/hubot-perforce/-/hubot-perforce-0.1.1.tgz"}},"0.1.2":{"name":"hubot-perforce","description":"Hubot script for interacting with Perforce","version":"0.1.2","homepage":"https://github.com/mdouglass/hubot-perforce","author":{"name":"Matthew Douglass","email":"matthew+npm@douglasstribe.com"},"license":"MIT","keywords":["hubot","hubot-scripts","perforce","p4"],"repository":{"type":"git","url":"https://github.com/mdouglass/hubot-perforce.git"},"bugs":{"url":"https://github.com/mdouglass/hubot-perforce/issues"},"dependencies":{"coffee-script":"~1.6"},"devDependencies":{"mocha":"*","chai":"*","sinon-chai":"*","sinon":"*"},"main":"index.coffee","scripts":{"test":"script/test"},"gitHead":"12ae611d95ebbbdf23aebecda3f3ba11f70615bf","_id":"hubot-perforce@0.1.2","_shasum":"336b2ad518555a3c5e86ac2cce35f3da1e2b93d3","_from":".","_npmVersion":"2.1.7","_nodeVersion":"0.10.33","_npmUser":{"name":"mdouglass","email":"msed.npm@douglasstribe.com"},"maintainers":[{"name":"mdouglass","email":"matthew+npm@douglasstribe.com"}],"dist":{"shasum":"336b2ad518555a3c5e86ac2cce35f3da1e2b93d3","tarball":"http://registry.npmjs.org/hubot-perforce/-/hubot-perforce-0.1.2.tgz"}},"0.1.3":{"name":"hubot-perforce","description":"Hubot script for interacting with Perforce","version":"0.1.3","homepage":"https://github.com/mdouglass/hubot-perforce","author":{"name":"Matthew Douglass","email":"matthew+npm@douglasstribe.com"},"license":"MIT","keywords":["hubot","hubot-scripts","perforce","p4"],"repository":{"type":"git","url":"https://github.com/mdouglass/hubot-perforce.git"},"bugs":{"url":"https://github.com/mdouglass/hubot-perforce/issues"},"dependencies":{"coffee-script":"~1.6"},"devDependencies":{"mocha":"*","chai":"*","sinon-chai":"*","sinon":"*"},"main":"index.coffee","scripts":{"test":"script/test"},"gitHead":"06f2566aa1d05e9e3ef703b8dc6feaf889ba65d7","_id":"hubot-perforce@0.1.3","_shasum":"20e47bcee211845b28b728c253a52fd45b0b4564","_from":".","_npmVersion":"2.1.11","_nodeVersion":"0.10.33","_npmUser":{"name":"mdouglass","email":"matthew+npm@douglasstribe.com"},"maintainers":[{"name":"mdouglass","email":"matthew+npm@douglasstribe.com"}],"dist":{"shasum":"20e47bcee211845b28b728c253a52fd45b0b4564","tarball":"http://registry.npmjs.org/hubot-perforce/-/hubot-perforce-0.1.3.tgz"}}},"readme":"# hubot-perforce\n[![Build Status](https://travis-ci.org/mdouglass/hubot-perforce.svg?branch=master)](https://travis-ci.org/mdouglass/hubot-perforce)\n\nHubot script for receiving notifications from Perforce and interacting with Perforce.\n\n**THIS PROJECT IS IN AN EARLY STATE, USE AT YOUR OWN RISK**\n\n## Installation\n\nIn hubot project repo, run:\n\n`npm install hubot-perforce --save`\n\nThen add **hubot-perforce** to your `external-scripts.json`:\n\n```json\n[\"hubot-perforce\"]\n```\n\n## Quick Start\n\n1. Configure default p4\n\n  An instance of `P4` is available at `robot.p4`. This instance needs to be configured for your Perforce server when Hubot starts. There are three different ways to accomplish this.\n\n  If you do nothing else, the default p4 will be configured using the standard Perforce environment variables (see the [Perforce Manual](http://www.perforce.com/perforce/doc.current/manuals/cmdref/envars.html) for the details):\n  ```\n  P4CHARSET  P4CLIENT   P4HOST\n  P4LANGUAGE P4PORT     P4USER\n  ```\n\n  If you wish to override the standard Perforce environment variables, you may specify any of the following custom environment variables:\n  ```\n  HUBOT_P4CHARSET  HUBOT_P4CLIENT   HUBOT_P4HOST\n  HUBOT_P4LANGUAGE HUBOT_P4PORT     HUBOT_P4USER\n  ```\n\n  As a final alternative, you may configure the p4 instance at runtime:\n\n  ```coffeescript\n  module.exports = (robot) ->\n    # Handle all notifications\n    robot.on 'perforce:ready', (p4) ->\n      p4.charset  = 'utf8'\n      p4.client   = 'my-client'\n      p4.host     = 'my-host'\n      p4.port     = 'perforce:1666'\n      p4.user     = 'me'\n  ```\n\n  **NOTE:** It is expected, that the configured Perforce user will already be logged in when Hubot is started. If this is not the case, use the `perforce:ready` event to execute a `P4.login` as needed by your configuration.\n\n2. Configure Perforce trigger to notify Hubot\n\n  Use the p4 triggers command to notify  **hubot-perforce** when a change is committed. In general, an HTTP POST to `/hubot/perforce` which the change number needs to be made. An example using `curl` is shown here:\n\n  ```\n  hubot-perforce change-commit //... \"curl -d 'change=%change' http://hubot.example.com/hubot/perforce\"\n  ```\n\n3. Listen for change events in your own code\n\n  **hubot-perforce** will emit a `perforce:change` event whenever a change is committed. That event will contain the full details of the change (as returned by `p4 describe`)\n\n  ```coffeescript\n  { inspect } = require 'util'\n\n  module.exports = (robot) ->\n    robot.on 'perforce:change', (change) ->\n      robot.logger.info \"Perforce Change: #{inspect change}\"\n  ```\n\n  ```\n  [Wed Dec 03 2014 22:13:06 GMT-0800 (PST)] INFO Perforce Change: { code: 'stat',\n  change: 12345,\n  user: 'user',\n  client: 'client',\n  time: 1410399382,\n  desc: 'Change',\n  status: 'submitted',\n  changeType: 'public',\n  path: '//depot/path/...',\n  files:\n  [ { depotFile: '//depot/path/file.txt',\n  action: 'edit',\n  type: 'text',\n  rev: 42,\n  fileSize: 1024,\n  digest: 'C24816CC89E4B289F338F2FE87DC04A0' } ] }\n  ```\n\n## P4 class\n\nThis section is intended to be an introduction to using `robot.p4`, but it has not been written yet.\n\n- All commands can be sent via `p4.command` which matches general p4 command line of form `p4 [ options ] command [ arg ... ]`\n\n  ```coffeescript\n  opts = [ '-r', '3']\n  command = 'opened'\n  args = [ '-m', 100 ]\n  robot.p4.command options, command, args, (error, output) ->\n    robot.logger.info error\n    robot.logger.info output\n  ```\n- Convenience commands\n  - `p4.describe`, `p4.info`, `p4.istat`, `p4.streams`, etc.\n- Response handling configuration\n  - All default on, but can be turned off if needed/desired\n  - `p4.responseInfersType`\n  - `p4.responseSingleElementArrayToObject`\n  - `p4.responseOrganized`\n- `p4.maxBuffer` defaults to 200KB, may need to be upped for many use cases\n","maintainers":[{"name":"mdouglass","email":"matthew+npm@douglasstribe.com"}],"time":{"modified":"2014-12-11T04:04:55.357Z","created":"2014-12-04T07:05:39.796Z","0.1.0":"2014-12-04T07:05:39.796Z","0.1.1":"2014-12-04T19:06:13.556Z","0.1.2":"2014-12-04T20:31:56.879Z","0.1.3":"2014-12-11T04:04:55.357Z"},"homepage":"https://github.com/mdouglass/hubot-perforce","keywords":["hubot","hubot-scripts","perforce","p4"],"repository":{"type":"git","url":"https://github.com/mdouglass/hubot-perforce.git"},"author":{"name":"Matthew Douglass","email":"matthew+npm@douglasstribe.com"},"bugs":{"url":"https://github.com/mdouglass/hubot-perforce/issues"},"license":"MIT","readmeFilename":"README.md","users":{"mdouglass":true}}
