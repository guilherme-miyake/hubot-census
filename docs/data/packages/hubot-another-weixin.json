{"_id":"hubot-another-weixin","_rev":"7-9e1357d6824a239eff395e8ff7dc8408","name":"hubot-another-weixin","description":"This is another wechat/weixin adapter for hubot","dist-tags":{"latest":"0.1.6"},"versions":{"0.1.0":{"name":"hubot-another-weixin","version":"0.1.0","description":"This is another wechat/weixin adapter for hubot","main":"./src/hubot-wx.coffee","keywords":["hubot","adapter","wechat","weixin"],"author":{"name":"Jimmy Xu","email":"xjimmyshcn@gmail.com"},"license":"MIT","dependencies":{"js-yaml":">= 3.0.0","lodash":"^4.15.0","log":"1.4.0","parent-require":"^1.0.0","sync-request":"^2.1.0","nanotimer":"^0.3.14","file-md5":"1.0.0"},"devDependencies":{"coffee-script":">=1.2.0","coffeelint":"^1.14.1"},"gitHead":"2ab5eb4ac2b991d21e68fbd9cc52241e48dd5c46","_id":"hubot-another-weixin@0.1.0","_npmVersion":"5.4.2","_nodeVersion":"8.7.0","_npmUser":{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"},"dist":{"integrity":"sha512-TBT2/zlAle9efi8e31dqbX4Al2Cx+Xz/SfSlHadmoYCNbFYeflBjkytsb2n1BjDw9HGPSufz+xYnaS1kD18HpA==","shasum":"f39519c76382e5b63f671b4cc7a0875610b3066f","tarball":"https://registry.npmjs.org/hubot-another-weixin/-/hubot-another-weixin-0.1.0.tgz"},"maintainers":[{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hubot-another-weixin-0.1.0.tgz_1508947683787_0.47047194465994835"}},"0.1.1":{"name":"hubot-another-weixin","version":"0.1.1","description":"This is another wechat/weixin adapter for hubot","main":"./src/hubot-wx.coffee","keywords":["hubot","adapter","wechat","weixin"],"author":{"name":"Jimmy Xu","email":"xjimmyshcn@gmail.com"},"license":"MIT","dependencies":{"js-yaml":">= 3.0.0","lodash":"^4.15.0","log":"1.4.0","parent-require":"^1.0.0","sync-request":"^2.1.0","nanotimer":"^0.3.14","file-md5":"1.0.0"},"devDependencies":{"coffee-script":">=1.2.0","coffeelint":"^1.14.1"},"gitHead":"ef624427104ee08cf12ed8a811d231b8806113c7","_id":"hubot-another-weixin@0.1.1","_npmVersion":"5.4.2","_nodeVersion":"8.7.0","_npmUser":{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"},"dist":{"integrity":"sha512-9XVo8F6fiGSUiYh4AhrrjQLTolTI6SO4tRm+6eN2OSv4ipYYINRILElWJtzdN+218YMHk/813RV6wq0jpwJZzg==","shasum":"e0af00e80d2185c0b243baaba92061b711142fe1","tarball":"https://registry.npmjs.org/hubot-another-weixin/-/hubot-another-weixin-0.1.1.tgz"},"maintainers":[{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hubot-another-weixin-0.1.1.tgz_1508953308235_0.12087883614003658"}},"0.1.2":{"name":"hubot-another-weixin","version":"0.1.2","description":"This is another wechat/weixin adapter for hubot","main":"./src/hubot-wx.coffee","keywords":["hubot","adapter","wechat","weixin"],"author":{"name":"Jimmy Xu","email":"xjimmyshcn@gmail.com"},"license":"MIT","dependencies":{"js-yaml":">= 3.0.0","lodash":"^4.15.0","log":"1.4.0","parent-require":"^1.0.0","sync-request":"^2.1.0","nanotimer":"^0.3.14","file-md5":"1.0.0"},"devDependencies":{"coffee-script":">=1.2.0","coffeelint":"^1.14.1"},"gitHead":"f722209dd1f047d247ed8269c76746e6798dcbd8","_id":"hubot-another-weixin@0.1.2","_npmVersion":"5.4.2","_nodeVersion":"8.7.0","_npmUser":{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"},"dist":{"integrity":"sha512-PBlXM5jHLJ0uBc8E5Yb+BYtVr7ov9Y7joIAseiOrKpyW3xQLQ0/G5azmwTHzYvb4JeFrZJVQ7FbuiTmDV77y2Q==","shasum":"ef440c5ed51f3ea7e536b824e3901ad219116718","tarball":"https://registry.npmjs.org/hubot-another-weixin/-/hubot-another-weixin-0.1.2.tgz"},"maintainers":[{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hubot-another-weixin-0.1.2.tgz_1509003587503_0.5205861662980169"}},"0.1.3":{"name":"hubot-another-weixin","version":"0.1.3","description":"This is another wechat/weixin adapter for hubot","main":"./src/hubot-wx.coffee","keywords":["hubot","adapter","wechat","weixin"],"author":{"name":"Jimmy Xu","email":"xjimmyshcn@gmail.com"},"license":"MIT","dependencies":{"js-yaml":">= 3.0.0","lodash":"^4.15.0","log":"1.4.0","parent-require":"^1.0.0","sync-request":"^2.1.0","nanotimer":"^0.3.14","file-md5":"1.0.0"},"devDependencies":{"coffee-script":">=1.2.0","coffeelint":"^1.14.1"},"gitHead":"9a248f699866c07c4cb6575cd236a42cf8dfc306","_id":"hubot-another-weixin@0.1.3","_npmVersion":"5.4.2","_nodeVersion":"8.7.0","_npmUser":{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"},"dist":{"integrity":"sha512-I6lCiY3hrP3v/Dk3qr1k1qyFh311d7jJe2Ud9PLHwZjLPbR/Pv5xCBw0b87vKFmyek9oJfedPBqLnbsAWjLDog==","shasum":"a7075eec1796507d4c76f393ca61296a2507c027","tarball":"https://registry.npmjs.org/hubot-another-weixin/-/hubot-another-weixin-0.1.3.tgz"},"maintainers":[{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hubot-another-weixin-0.1.3.tgz_1509008001271_0.22506955289281905"}},"0.1.4":{"name":"hubot-another-weixin","version":"0.1.4","description":"This is another wechat/weixin adapter for hubot","main":"./src/hubot-wx.coffee","keywords":["hubot","adapter","wechat","weixin"],"author":{"name":"Jimmy Xu","email":"xjimmyshcn@gmail.com"},"license":"MIT","dependencies":{"js-yaml":">= 3.0.0","lodash":"^4.15.0","log":"1.4.0","parent-require":"^1.0.0","sync-request":"^2.1.0","nanotimer":"^0.3.14","file-md5":"1.0.0"},"devDependencies":{"coffee-script":">=1.2.0","coffeelint":"^1.14.1"},"gitHead":"6824cc485c954bc3e6275cac6bf54ba865a6beee","_id":"hubot-another-weixin@0.1.4","_npmVersion":"5.4.2","_nodeVersion":"8.7.0","_npmUser":{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"},"dist":{"integrity":"sha512-4lncXtpcHE89pyWdtSXP3yWEvz3FduSfNY7VfgIEvHfb5u5IJMYVvT8cnIz+/DEu4RZB6+frSe1CIG7V/l7GiA==","shasum":"8ced35cb731da47408f549021d0102244c9360f3","tarball":"https://registry.npmjs.org/hubot-another-weixin/-/hubot-another-weixin-0.1.4.tgz"},"maintainers":[{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hubot-another-weixin-0.1.4.tgz_1509018587106_0.49647865747101605"}},"0.1.5":{"name":"hubot-another-weixin","version":"0.1.5","description":"This is another wechat/weixin adapter for hubot","main":"./src/hubot-wx.coffee","keywords":["hubot","adapter","wechat","weixin"],"author":{"name":"Jimmy Xu","email":"xjimmyshcn@gmail.com"},"license":"MIT","dependencies":{"js-yaml":">= 3.0.0","lodash":"^4.15.0","log":"1.4.0","parent-require":"^1.0.0","sync-request":"^2.1.0","nanotimer":"^0.3.14","file-md5":"1.0.0"},"devDependencies":{"coffee-script":">=1.2.0","coffeelint":"^1.14.1"},"gitHead":"1ffa09f951cc04883cef02cccd0d8a6a57150bc6","_id":"hubot-another-weixin@0.1.5","_npmVersion":"5.4.2","_nodeVersion":"8.7.0","_npmUser":{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"},"dist":{"integrity":"sha512-+s4DE13eQ/UOkTAl3+BeAMnKLZtMQsmWUZxoaaugq3aAElbK8vwm98HL1UT0s88kvuXBIh4t+0dIYw2RUbRapA==","shasum":"adc2b3e57aa683ce1ced92fa2a53cb73cb71601f","tarball":"https://registry.npmjs.org/hubot-another-weixin/-/hubot-another-weixin-0.1.5.tgz"},"maintainers":[{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hubot-another-weixin-0.1.5.tgz_1509356778518_0.1383270367514342"}},"0.1.6":{"name":"hubot-another-weixin","version":"0.1.6","description":"This is another wechat/weixin adapter for hubot","main":"./src/hubot-wx.coffee","keywords":["hubot","adapter","wechat","weixin"],"author":{"name":"Jimmy Xu","email":"xjimmyshcn@gmail.com"},"license":"MIT","dependencies":{"js-yaml":">= 3.0.0","lodash":"^4.15.0","log":"1.4.0","parent-require":"^1.0.0","sync-request":"^2.1.0","nanotimer":"^0.3.14","file-md5":"1.0.0"},"devDependencies":{"coffee-script":">=1.2.0","coffeelint":"^1.14.1"},"gitHead":"4fa0b7fccbdd38f877c0383a2acfbf37cef78926","_id":"hubot-another-weixin@0.1.6","_npmVersion":"5.4.2","_nodeVersion":"8.7.0","_npmUser":{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"},"dist":{"integrity":"sha512-7M16OPYahiVe6qt7mz7Cra7FBhj8RlLdZq/E17TWHPwqFeKlt4Prvss9motGCzNAsP3IrZ91+CdgP91AE9/B7w==","shasum":"b371e15f1bb9a6232e7c6ca118a9e77cbee19955","tarball":"https://registry.npmjs.org/hubot-another-weixin/-/hubot-another-weixin-0.1.6.tgz"},"maintainers":[{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hubot-another-weixin-0.1.6.tgz_1509370906595_0.5755092489998788"}}},"readme":"# ![weixin](http://weixin.qq.com/zh_CN/htmledition/images/favicon1fbcbe.ico)  Hubot-Weixin \n  - hubot [![hubot version](https://img.shields.io/npm/v/hubot.svg?style=plastic)](https://github.com/github/hubot) \n  - hubot-weixin [![hubot-weixin version](https://img.shields.io/npm/v/hubot-weixin.svg?style=plastic)](https://github.com/KasperDeng/Hubot-WeChat) \n  - npm [![npm version](https://img.shields.io/npm/v/npm.svg?style=plastic)](https://www.npmjs.com/package/hubot-weixin)\n  - nodejs [![node version](https://img.shields.io/node/v/latest-version.svg?style=plastic)](https://nodejs.org/en/)\n\n* [中文版](https://github.com/KasperDeng/Hubot-WeChat/blob/master/README-zh.md)\n* This is wechat/weixin adapter for hubot.\n* Notation: wechat is another name for the popular App weixin in China\n* Goal\n  - login once, run anywhere, anytime\n  - Make life easier and let bot do something for us in backend\n\n## Features of Hubot-WeChat (WeChat Adapter) ##\n* Basic functions as that in WeChat Web\n  - Auto-reply text to group\n  - Auto-reply media to group\n  - Auto-reply to specific person\n* Auto-report status to maintainer\n* A forever script to launch the hubot instance and mornintoring\n* Aboundants of scripts for hubot\n  - integrated with jenkins\n  - integrated with [turing robot](http://www.tuling123.com/)\n  - Lots of life information by querying the APIs provided from baidu api-store\n\n## Wechat Adapter Configuration ##\n\n### Basic Config ###\n* The hubot needs a real WeChatID\n* The hubot's WeChatID should be include in the group to be listened on for auto-reply\n* The group/specific person should be save into that contact list\n\n### config.yaml ###\n* A config.yaml is provided to set the configuration items \n  - Those items most are for wechat login in Hubot-WeChat startup\n\n* Get config items method\n  - Login the wechat from browser, use the wechatId which is used for hubot\n  - **Capture data from webwxinit api from browser debug mode**\n\n* url\n  - baseUrl -- wx/wx2\n  - baseUploadUrl -- file/file2\n  - Wechat server has traffic distribution to WX/WX2 server dependent on hubot's WeChat ID \n\n* Below data are needed and set into config.yaml apporiated fields \n  - header\n    + cookie\n  - BaseRequest\n    + Uin\n    + Sid\n    + Skey\n    + DeviceId\n\n* maintainerName\n  - Please fill the maintainer's wechat name (the maintainer should be in hubot's wechat contact list) \n  - Hubot will report its online status to maintainer in a configured interval\n\n* webWxSyncInterval\n  - To sync receiving message from WX server\n  - Default: 1500 ms \n\n* syncCheckInterval\n  - It is the heartbeat to WX server \n  - To trick WX server the login persion still on the web wechat\n  - Default: 30s, it is same behavior in web wechat\n\n* listenOnAllGroups\n  - default value: true. Then hubot will listen on all the group where it is in\n\n* listenGroupNameList\n  - It is used to control hubot only listen on some group for auto reply \n\n* Other config item: it's simple to know from its meaning and you can check the code for its usage\n\n## Start Up ##\n\n### by docker ###\n* `docker pull kasperdeng/hubot-weixin`\n  - size 83M, based on alpine linux\n* Please prepare below config files on host\n  - config.yaml with your login info: cookie, Uin, SKey, deviceId\n    + For starting in docker, please set `logToFile: true` and `wxLogPath: \"/root/hubot/wxhubot.log\"`\n    + e.g. `/home/kasper/dockerHubot/config.yaml`\n  - Your scripts directory\n    + e.g. `/home/kasper/dockerHubot/scripts`\n* start-up command. Please note using `-v`(volume) to map your config file and log file path on your host.\n  - `docker run -d -v /home/kasper/dockerHubot/scripts:/root/hubot/scripts -v /home/kasper/dockerHubot/config.yaml:/root/hubot/node_modules/hubot-weixin/config.yaml -v /home/kasper/dockerHubot/wxhubot.log:/root/hubot/wxhubot.log kasperdeng/hubot-weixin`\n  - Use this command to enter the docker instance for debugging. `docker run -it -v /home/kasper/dockerHubot/scripts:/root/hubot/scripts -v /home/kasper/dockerHubot/config.yaml:/root/hubot/node_modules/hubot-weixin/config.yaml -v /home/kasper/dockerHubot/wxhubot.log:/root/hubot/wxhubot.log kasperdeng/hubot-weixin /bin/sh`\n* About the image `kasperdeng/hubot-weixin`, please refer to [Dockfile](https://www.github.com/kasperdeng/docker-hubot-weixin)\n\n### by npm ###\n* First, setup hubot(details in [Hubot official](https://hubot.github.com))\n* add `hubot-weixin`to hubot's package.json\n* run `npm install` in your hubot dir\n* start hubot: `bin/hubot -a weixin`\n\n### by git pulling ###\n* Pull hubot-weixin from here\n* Make symbolic link to your hubot-weixin in Hubot'snode_modules\n  - `npm link <your hubot-weixin dir>`\n* start hubot: `bin/hubot -a weixin`\n\n\n## Design & Implementation Notes ##\n* The problem\n  - Scanning the QR code to login web wechat\n  - No published official WeChat api interface\n* Workaround for login\n  - Need login manually by scanning the QR code once\n  - Capture all the required data as hubot configuration(details in next slide) \n* Shoot the trouble\n  - Use chrome/firefox to analyze web WeChat API\n  - Try its web APIs by curl\n  - Analyze the parameters and what it is\n  - Analyze the wxApp.js\n* Notes:\n  - **The hubot wechat on the mobile side keeps online is preferred**\n  - Reason: WeChat server disconnects your hubot with websync failure after 3~4 days. \n    But hubot works again once login mobile wechat app again.\n\n## The Adapter Software Hierachy ##\n* Operations in our Wechat-Hubot\n  - wxbot.coffee\n\t\n* The coffeescript version's WxChat Web APIs\n  - wxApi.coffee\n\n* The http layer, including sync and async\n  - httpclient.coffee\n\n## Integrate Adapter to Hubot ##\n* Implement the needed methods of adapter\n  - constructor\n    + Getting the hubot robot \n  - send\n    + hubot sends out message to specific persion/group\n  - reply \n    + hubot replies message to specific persion/group\n  - run\n    + New a WxBot\n    + Being called in hubot launching\n      It is used to init the wechat groups information\n    + Integrate to Hubot by calling\n\n    ~~~\n    @emit 'connected'\n    ~~~\n* Implement a callback to call hubot's receive method to get the incoming message\n\n## SDE ##\n* [Getting Started With Hubot](https://hubot.github.com/docs/) on Windows/Unix-Like\n* Backlog management\n  - [kanbanflow](https://kanbanflow.com/board/23ec47145de7783b8cf2e80187538b5b)\n* Version control\n  - git \n* IDE\n  - Sublime\n  - or WebStorm/Vim\n* DevEnv\n  - Nodejs and npm\n  - Use `npm install` to get all the node modules\n    + Inside greatwall, add option `--registry=https://registry.npm.taobao.org`\n* Programming Language\n  - coffeeScript\n  - coffeelint to checkstyle \n\n## How to write Your Scripts? ##\n* Please refer to the scirpts in repo\n* Follow the coding style\n* The `msg` in the scripts provides the http asycn function to get your data from open APIs\n\n## Test Your Script ##\n* With shell adapter\n* Use your WeChat ID to test\n\n## Contributor ##\n* bumblebee team \n  - [Jeff Zhu](https://github.com/kfchu)\n  - [Yinsong Ma](https://github.com/eyinsma)\n  - [Kasper Deng](https://github.com/kasperdeng)\n\n* [Shouxi Huang](https://github.com/hsx1612727380)\n\n## TODO ##\n* No much functions to be implemented, most are focus on scripting\n* Unit test\n\n## Reference ##\n* [Hubot Official](https://hubot.github.com)\n* [About WxChat Web API](https://github.com/hexcola/wxplugin/blob/master/protocal_2.md)\n* [How to write your adapter?](https://hubot.github.com/docs/adapters/development/)\n\n## License ##\n* See the [LICENSE](https://github.com/KasperDeng/Hubot-WeChat/blob/master/LICENSE) file for license rights and limitations (MIT).\n\n","maintainers":[{"name":"xjimmyshcn","email":"xjimmyshcn@gmail.com"}],"time":{"modified":"2017-10-30T13:41:46.709Z","created":"2017-10-25T16:08:03.962Z","0.1.0":"2017-10-25T16:08:03.962Z","0.1.1":"2017-10-25T17:41:48.335Z","0.1.2":"2017-10-26T07:39:47.587Z","0.1.3":"2017-10-26T08:53:21.346Z","0.1.4":"2017-10-26T11:49:47.256Z","0.1.5":"2017-10-30T09:46:18.681Z","0.1.6":"2017-10-30T13:41:46.709Z"},"keywords":["hubot","adapter","wechat","weixin"],"author":{"name":"Jimmy Xu","email":"xjimmyshcn@gmail.com"},"license":"MIT","readmeFilename":"README.md"}
