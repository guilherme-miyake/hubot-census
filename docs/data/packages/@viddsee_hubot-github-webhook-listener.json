{"_id":"@viddsee/hubot-github-webhook-listener","_rev":"2-d3701d1822d8808e77190129d6f3e640","name":"@viddsee/hubot-github-webhook-listener","description":"Listens for github webhooks and emits an event for other Hubot scripts to respond to.","dist-tags":{"latest":"1.0.1"},"versions":{"1.0.0":{"name":"@viddsee/hubot-github-webhook-listener","version":"1.0.0","author":{"name":"Viddsee","email":"support@viddsee.com"},"description":"Listens for github webhooks and emits an event for other Hubot scripts to respond to.","keywords":["hubot","chat","github","bot","webhook"],"license":"MIT","repository":{"type":"git","url":"git+https://github.com/viddsee/hubot-github-webhook-listener.git"},"main":"./src/hubot-github-webhook-listener.coffee","devDependencies":{"coffee-script":"~1.7.1","hubot":">= 2.6.0 < 3.0.0"},"bugs":{"url":"https://github.com/viddsee/hubot-github-webhook-listener/issues"},"dependencies":{"querystring":"^0.2.0","url":"^0.10.3","verify-github-webhook":"^1.0.1"},"gitHead":"1aa7bc8930a948c7af3f6b5330c9aae56b17c249","homepage":"https://github.com/viddsee/hubot-github-webhook-listener#readme","_id":"@viddsee/hubot-github-webhook-listener@1.0.0","_npmVersion":"5.3.0","_nodeVersion":"6.11.1","_npmUser":{"name":"viddsee","email":"support@viddsee.com"},"dist":{"integrity":"sha512-zEdQCbcILBj+UB7SIQGU0FlZdvftysLR9KfIsw7PEoXZD2m6j8cc6N/kI8+/pTkgZ0qpAvSVDZc00IDgNSCcrQ==","shasum":"d23c24f835a467596c90981eee865ea2ef96f5fe","tarball":"https://registry.npmjs.org/@viddsee/hubot-github-webhook-listener/-/hubot-github-webhook-listener-1.0.0.tgz"},"maintainers":[{"name":"viddsee","email":"support@viddsee.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hubot-github-webhook-listener-1.0.0.tgz_1506499475240_0.9790828521363437"},"directories":{}},"1.0.1":{"name":"@viddsee/hubot-github-webhook-listener","version":"1.0.1","author":{"name":"Viddsee","email":"support@viddsee.com"},"description":"Listens for github webhooks and emits an event for other Hubot scripts to respond to.","keywords":["hubot","chat","github","bot","webhook"],"license":"MIT","repository":{"type":"git","url":"git+https://github.com/viddsee/hubot-github-webhook-listener.git"},"main":"./src/hubot-github-webhook-listener.coffee","devDependencies":{"coffee-script":"~1.7.1","hubot":">= 2.6.0 < 3.0.0"},"bugs":{"url":"https://github.com/viddsee/hubot-github-webhook-listener/issues"},"dependencies":{"querystring":"^0.2.0","url":"^0.10.3"},"gitHead":"c032876de9beda216423b3b1d010a500a2e3b72f","homepage":"https://github.com/viddsee/hubot-github-webhook-listener#readme","_id":"@viddsee/hubot-github-webhook-listener@1.0.1","_npmVersion":"5.3.0","_nodeVersion":"6.11.1","_npmUser":{"name":"viddsee","email":"support@viddsee.com"},"dist":{"integrity":"sha512-zfuqFcJSXiGhFFWeto8HxE5U4f83jsTkFAiV6cJW2fRuv3KUZM7/ZfL4DNdIVpsSXfb30rliFqoLWqhdK38X7g==","shasum":"d56e5918f9dbc21bdf65161f3e4b5b50c465cecf","tarball":"https://registry.npmjs.org/@viddsee/hubot-github-webhook-listener/-/hubot-github-webhook-listener-1.0.1.tgz"},"maintainers":[{"name":"viddsee","email":"support@viddsee.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hubot-github-webhook-listener-1.0.1.tgz_1506586123615_0.021656154189258814"},"directories":{}}},"readme":"# hubot-github-webhook-listener\n\nA [Hubot](http://hubot.github.com/) script to that makes it easy to consume [Github Webhooks](https://developer.github.com/webhooks/).\n\n## Installation\n\nFrom your hubot folder:\n`npm install --save hubot-github-webhook-listener`\n\nThen, in your `external-scripts.json` file, add: `\"hubot-github-webhook-listener\"` to the list.\n\nCreate a new webhook for your `myuser/myrepo` repository at:\nhttps://github.com/myuser/myrepo/settings/hooks/new\nSet the webhook url to: &lt;HUBOT_URL&gt;:&lt;PORT&gt;/hubot/github-repo-listener\n\nFor example, if your hubot lives at myhubot.herokuapp.com, then you will set the webhook URL to: http://myhubot.herokuapp.com/hubot/github-repo-listener\n\n## Usage\n\nOn every incoming webhook message, a hubot event is emitted as follows\n\n```coffeescript\neventBody =\n  eventType   : req.headers[\"x-github-event\"]\n  signature   : req.headers[\"X-Hub-Signature\"]\n  deliveryId  : req.headers[\"X-Github-Delivery\"]\n  payload     : req.body\n  query       : querystring.parse(url.parse(req.url).query)\n\nrobot.emit \"github-repo-event\", eventBody\n```\n\nFor details on these fields, see the [Github Webhook documentation](https://developer.github.com/webhooks/).\n\n### Securing Your Webhooks\nTo ensure non-github sources cannot send messages to your hubot, set an\nenvironment variable named `GITHUB_WEBHOOK_SECRET` to your [Github hooks\nsecret](https://developer.github.com/v3/repos/hooks/#create-a-hook).\n\n### Consuming the event\nYou can consume it like so from one of your scripts:\n```coffeescript\n@robot.on \"github-repo-event\", (repo_event) =>\n  githubPayload = repo_event.payload\n  switch(repo_event.eventType)\n    when \"issue_comment\"\n      ...\n```\n\nNOTE: This script does not emit anything in chat. It is just a background task that makes consuming Github webhooks easier for other scripts.\n\nFor another example, see our [Hubot-Github adapter](https://github.com/ynab/hubot-github) that gives you a hubot in your Github issue comments.\n\n## Motivation\n\nI was using [hubot-github-repo-event-notifier](https://github.com/hubot-scripts/hubot-github-repo-event-notifier), but I needed something more generic to power our hubot-github adapter. So, I gutted it, and this script was born.\n\n## Local Testing\n\nFor easy local testing, I highly recommend ngrok: https://ngrok.com/\n\n1. Install [ngrok](https://ngrok.com/)\n2. run ngrok: `ngrok 8080`.\n  It will show you a public URL like: `Forwarding  https://7a008da9.ngrok.com -> 127.0.0.1:8080`\n3. Put that URL in as your Github webhook: `https://7a008da9.ngrok.com/hubot/github-repo-listener`\n4. Install the hubot-github adapter `npm install --save hubot-github-adapter`\n5. Run hubot locally: `HUBOT_GITHUB_TOKEN=some_long_guid GITHUB_WEBHOOK_SECRET=some_secret bin/hubot -a github-adapter --name Hubot`\n6. Fire off a github event by interacting with your repo. Comment on an issue or a PR for example.\n7. Navigate to `http://127.0.0.1:4040/`\n  There you can see all webhooks posted to your local machine, and can replay them as many times as you wish.\n\n## Copyright\n\nCopyright &copy; [YouNeedABudget.com](http://youneedabudget.com), LLC. (Github: [YNAB](http://github.com/ynab))\n\n## Author\n\nTaylor Brown, aka [Taytay](http://github.com/Taytay)\n\n## License\n\nMIT License; see LICENSE for further details.\n","maintainers":[{"name":"viddsee","email":"support@viddsee.com"}],"time":{"modified":"2017-09-28T08:08:43.696Z","created":"2017-09-27T08:04:35.324Z","1.0.0":"2017-09-27T08:04:35.324Z","1.0.1":"2017-09-28T08:08:43.696Z"},"homepage":"https://github.com/viddsee/hubot-github-webhook-listener#readme","keywords":["hubot","chat","github","bot","webhook"],"repository":{"type":"git","url":"git+https://github.com/viddsee/hubot-github-webhook-listener.git"},"author":{"name":"Viddsee","email":"support@viddsee.com"},"bugs":{"url":"https://github.com/viddsee/hubot-github-webhook-listener/issues"},"license":"MIT","readmeFilename":"README.md","_attachments":{}}