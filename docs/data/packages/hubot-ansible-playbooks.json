{"_id":"hubot-ansible-playbooks","_rev":"1-c6be5cfa8ac2e81d3d7ea0c93c79c619","name":"hubot-ansible-playbooks","dist-tags":{"latest":"0.9.0"},"versions":{"0.9.0":{"name":"hubot-ansible-playbooks","description":"A hubot script to launch ansible playbooks","version":"0.9.0","author":{"name":"Mathieu Réquillart","email":"mathieu.requillart@gmail.com"},"license":"MIT","keywords":["hubot","ansible"],"repository":{"type":"git","url":"git://github.com/b0bbywan/hubot-ansible-playbooks.git"},"bugs":{"url":"https://github.com/b0bbywan/hubot-ansible-playbooks/issues"},"dependencies":{"node-ansible":"^0.5.5"},"peerDependencies":{"hubot":">=2.0"},"devDependencies":{"hubot-test-helper":"^1.3.0","chai":"^2.1.1","coffeescript":"~1.6","grunt":"~0.4","grunt-contrib-watch":"~0.6.1","grunt-mocha-test":"~0.12.7","grunt-release":"~0.11.0","hubot":"2.x","matchdep":"~0.3.0","mocha":"^2.1.0","sinon":"^1.13.0","sinon-chai":"^2.7.0"},"main":"index.coffee","scripts":{"test":"grunt test"},"gitHead":"5e90610769c2f0b94b07af2aec8728beb2b73126","homepage":"https://github.com/b0bbywan/hubot-ansible-playbooks#readme","_id":"hubot-ansible-playbooks@0.9.0","_shasum":"43e9e9d8bd6c6e09016d4c8441964f10f2e35669","_from":".","_npmVersion":"3.10.10","_nodeVersion":"6.12.0","_npmUser":{"name":"b0bbywan","email":"mathieu.requillart@gmail.com"},"dist":{"shasum":"43e9e9d8bd6c6e09016d4c8441964f10f2e35669","tarball":"http://registry.npmjs.org/hubot-ansible-playbooks/-/hubot-ansible-playbooks-0.9.0.tgz","fileCount":10,"unpackedSize":13537},"maintainers":[{"name":"b0bbywan","email":"mathieu.requillart@gmail.com"}],"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hubot-ansible-playbooks_0.9.0_1520118678714_0.4946396508322375"},"_hasShrinkwrap":false}},"time":{"created":"2018-03-03T23:11:18.713Z","0.9.0":"2018-03-03T23:11:18.821Z","modified":"2018-03-03T23:11:19.557Z"},"maintainers":[{"name":"b0bbywan","email":"mathieu.requillart@gmail.com"}],"description":"A hubot script to launch ansible playbooks","homepage":"https://github.com/b0bbywan/hubot-ansible-playbooks#readme","keywords":["hubot","ansible"],"repository":{"type":"git","url":"git://github.com/b0bbywan/hubot-ansible-playbooks.git"},"author":{"name":"Mathieu Réquillart","email":"mathieu.requillart@gmail.com"},"bugs":{"url":"https://github.com/b0bbywan/hubot-ansible-playbooks/issues"},"license":"MIT","readme":"# hubot-ansible-playbooks\n\nA hubot script to launch ansible playbooks\n\nhubot-ansible-playbooks relies on *node-ansible*.\n\nSee [`src/ansible.coffee`](src/ansible.coffee) for full documentation.\n\n## Installation\n\nIn hubot project repo, run:\n\n`npm install hubot-ansible-playbooks --save`\n\nThen add **hubot-ansible-playbooks** to your `external-scripts.json`:\n\n```json\n[\n  \"hubot-ansible-playbooks\"\n]\n```\n\nAnsible has to be installed on the same host as your *Hubot*, and your playbooks must be accessible by the system user running *Hubot*.\n\nSo if you have a repository for ansible and for hubot and a playbook for hubot, you can create a playbook for Hubot to update himself. #MuchMeta\n\n## Environment variables\n\n- `HUBOT_ANSIBLE_SETTINGS`: location of your settings file\n- `HUBOT_ANSIBLE_VERBOSE`: set to display ok and skipped tasks\n- `HUBOT_SLACK_BOTNAME`: name of your Slack bot\n\n## Settings File\n\nThe settings file is a javascript module and looks likes this:\n\n```javascript\nmodule.exports = {\n  path: \"/home/ansible/deployer/\",\n  admin_users: [\n    \"U6YTSD2BZ\",\n    ...\n  ],\n  prod: {\n    inventory: \"ec2.py\",\n    playbook : \"prod\",\n    authorized_users: [\"U85LB1FPV\", ...]\n  },\n  ...\n}\n```\n\n- `path`: path to your ansible playbook folder\n- `admin_users`: list of slack user id who can use any playbook\n- Any other valid json key can be used as a nickname for your playbook\n- `inventory`: name of your inventory file. Relatively, the script considers that the inventory filed are stored in an `inventory` folder as recommanded by Ansible. Absolute path can also be used.\n- `playbook`: name of your playbook, without the extension\n- `authorized_users`: list of slack user id who can use this playbook\n\n## Sample Interaction\n\n```\nuser1>> hubot update prod limit deployer only ansible skip requirements with gitRepoVersion:feature\nhubot>> updating: **prod** limiting to **deployer** with only **ansible** skipping **requirements** replacing **gitRepoVersion:feature**\n```\n\nIn this case, hubot will execute the *prod* playbook, as defined in your settings file. It will only execute the tags and role associated to the *deployer* host(s), the tasks and role containing the *ansible* tags, but not those containing the *requirements* tags. The *gitRepoVersion* variable is overriden to use the *feature* branch (or commit or tag)\n\n## Various\n\nTo be more explcit, common feedback from ansible are enhanced with slack emojis. If there's interest, those might become environment variables to be configured.\n\nTo relieve the chan and comply with slack ratio sending limit, all messages are filtered. *ok* and *skipped* tasks are not displayed. If a message isn't handled by the filters it might come in a strange order. You can check the logs and open an issue.\n\n## ToDo\n\nUnit tests.\n\nImplement more node-ansible options, such as askPassword\n\nBe less dependant on Slack\n\n## NPM Module\n\nhttps://www.npmjs.com/package/hubot-ansible-playbooks\n","readmeFilename":"README.md"}
