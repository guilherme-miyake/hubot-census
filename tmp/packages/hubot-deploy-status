{"_id":"hubot-deploy-status","_rev":"2-54013e0c2101a6caf25331b6e9038632","name":"hubot-deploy-status","description":"Check deployment statuses from GitHub","dist-tags":{"latest":"0.4.2"},"versions":{"0.1.0":{"name":"hubot-deploy-status","version":"0.1.0","description":"Check deployment statuses from GitHub","main":"index.coffee","scripts":{"test":"script/test"},"repository":{"type":"git","url":"https://github.com/flowdock/hubot-deploy-status.git"},"keywords":["hubot","deploy","hubot-script"],"author":{"name":"Flowdock","email":"team@flowdock.com"},"contributors":[{"name":"Otto Vehvilainen","email":"vehvis@flowdock.com"}],"license":"MIT","bugs":{"url":"https://github.com/flowdock/hubot-deploy-status/issues"},"homepage":"https://github.com/flowdock/hubot-deploy-status","dependencies":{"coffee-script":"^1.8.0","octonode":"^0.6.7"},"devDependencies":{"chai":"^1.9.2","mocha":"^1.21.4","sinon":"^1.10.3","sinon-chai":"^2.5.0"},"engines":{"node":">=0.8.0"},"gitHead":"45d04a02af2588733c23ea96a385ba1dcb7bd4db","_id":"hubot-deploy-status@0.1.0","_shasum":"2cbe898965ac2d6369cf2755c299072d43783fb9","_from":".","_npmVersion":"1.4.14","_npmUser":{"name":"flowdock","email":"team@flowdock.com"},"maintainers":[{"name":"flowdock","email":"team@flowdock.com"}],"dist":{"shasum":"2cbe898965ac2d6369cf2755c299072d43783fb9","tarball":"http://registry.npmjs.org/hubot-deploy-status/-/hubot-deploy-status-0.1.0.tgz"}},"0.2.0":{"name":"hubot-deploy-status","version":"0.2.0","description":"Check deployment statuses from GitHub","main":"index.coffee","scripts":{"test":"script/test"},"repository":{"type":"git","url":"https://github.com/flowdock/hubot-deploy-status.git"},"keywords":["hubot","deploy","hubot-script"],"author":{"name":"Flowdock","email":"team@flowdock.com"},"contributors":[{"name":"Otto Vehvilainen","email":"otto.vehvilainen@gmail.com"}],"license":"MIT","bugs":{"url":"https://github.com/flowdock/hubot-deploy-status/issues"},"homepage":"https://github.com/flowdock/hubot-deploy-status","dependencies":{"coffee-script":"^1.8.0","cron":"^1.0.5","octonode":"^0.6.7","sprintf":"^0.1.4","time":"^0.11.0","timeago":"^0.2.0"},"devDependencies":{"chai":"^1.9.2","mocha":"^1.21.4","sinon":"^1.10.3","sinon-chai":"^2.5.0"},"engines":{"node":">=0.8.0"},"gitHead":"327089beebe62108eb5b8f208d7a3836156f0583","_id":"hubot-deploy-status@0.2.0","_shasum":"288006a3b8b6df8f7f91c41fea622fd28f3f175b","_from":".","_npmVersion":"1.4.14","_npmUser":{"name":"flowdock","email":"team@flowdock.com"},"maintainers":[{"name":"flowdock","email":"team@flowdock.com"}],"dist":{"shasum":"288006a3b8b6df8f7f91c41fea622fd28f3f175b","tarball":"http://registry.npmjs.org/hubot-deploy-status/-/hubot-deploy-status-0.2.0.tgz"}},"0.2.1":{"name":"hubot-deploy-status","version":"0.2.1","description":"Check deployment statuses from GitHub","main":"index.coffee","scripts":{"test":"script/test"},"repository":{"type":"git","url":"https://github.com/flowdock/hubot-deploy-status.git"},"keywords":["hubot","deploy","hubot-script"],"author":{"name":"Flowdock","email":"team@flowdock.com"},"contributors":[{"name":"Otto Vehvilainen","email":"otto.vehvilainen@gmail.com"}],"license":"MIT","bugs":{"url":"https://github.com/flowdock/hubot-deploy-status/issues"},"homepage":"https://github.com/flowdock/hubot-deploy-status","dependencies":{"coffee-script":"^1.8.0","cron":"^1.0.5","octonode":"^0.6.7","sprintf":"^0.1.4","time":"^0.11.0","timeago":"^0.2.0"},"devDependencies":{"chai":"^1.9.2","mocha":"^1.21.4","sinon":"^1.10.3","sinon-chai":"^2.5.0"},"engines":{"node":">=0.8.0"},"gitHead":"cf9ef7930d21205de08d8dcc5a8625d3eb1d2003","_id":"hubot-deploy-status@0.2.1","_shasum":"775c622a85fb20f7aefa6219f28fa167899c1edf","_from":".","_npmVersion":"1.4.14","_npmUser":{"name":"flowdock","email":"team@flowdock.com"},"maintainers":[{"name":"flowdock","email":"team@flowdock.com"}],"dist":{"shasum":"775c622a85fb20f7aefa6219f28fa167899c1edf","tarball":"http://registry.npmjs.org/hubot-deploy-status/-/hubot-deploy-status-0.2.1.tgz"}},"0.2.2":{"name":"hubot-deploy-status","version":"0.2.2","description":"Check deployment statuses from GitHub","main":"index.coffee","scripts":{"test":"script/test"},"repository":{"type":"git","url":"https://github.com/flowdock/hubot-deploy-status.git"},"keywords":["hubot","deploy","hubot-script"],"author":{"name":"Flowdock","email":"team@flowdock.com"},"contributors":[{"name":"Otto Vehvilainen","email":"otto.vehvilainen@gmail.com"}],"license":"MIT","bugs":{"url":"https://github.com/flowdock/hubot-deploy-status/issues"},"homepage":"https://github.com/flowdock/hubot-deploy-status","dependencies":{"coffee-script":"^1.8.0","cron":"^1.0.5","octonode":"^0.6.7","sprintf":"^0.1.4","time":"^0.11.0","timeago":"^0.2.0"},"devDependencies":{"chai":"^1.9.2","mocha":"^1.21.4","sinon":"^1.10.3","sinon-chai":"^2.5.0"},"engines":{"node":">=0.8.0"},"gitHead":"c428d02ab3c63e84c4df294d2496a85a32da78ea","_id":"hubot-deploy-status@0.2.2","_shasum":"59e1871eb5b0153c39f9101da7a714befb223711","_from":".","_npmVersion":"1.4.14","_npmUser":{"name":"flowdock","email":"team@flowdock.com"},"maintainers":[{"name":"flowdock","email":"team@flowdock.com"}],"dist":{"shasum":"59e1871eb5b0153c39f9101da7a714befb223711","tarball":"http://registry.npmjs.org/hubot-deploy-status/-/hubot-deploy-status-0.2.2.tgz"}},"0.2.3":{"name":"hubot-deploy-status","version":"0.2.3","description":"Check deployment statuses from GitHub","main":"index.coffee","scripts":{"test":"script/test"},"repository":{"type":"git","url":"https://github.com/flowdock/hubot-deploy-status.git"},"keywords":["hubot","deploy","hubot-script"],"author":{"name":"Flowdock","email":"team@flowdock.com"},"contributors":[{"name":"Otto Vehvilainen","email":"otto.vehvilainen@gmail.com"}],"license":"MIT","bugs":{"url":"https://github.com/flowdock/hubot-deploy-status/issues"},"homepage":"https://github.com/flowdock/hubot-deploy-status","dependencies":{"coffee-script":"^1.8.0","cron":"^1.0.5","octonode":"^0.6.7","sprintf":"^0.1.4","time":"^0.11.0","timeago":"^0.2.0"},"devDependencies":{"chai":"^1.9.2","mocha":"^1.21.4","sinon":"^1.10.3","sinon-chai":"^2.5.0"},"engines":{"node":">=0.8.0"},"gitHead":"7754fa7fea5ff66c3dc0c38dda0e0e312c64bc08","_id":"hubot-deploy-status@0.2.3","_shasum":"d725d93c5b712de793ae6567a0d9176ea174cb96","_from":".","_npmVersion":"1.4.14","_npmUser":{"name":"flowdock","email":"team@flowdock.com"},"maintainers":[{"name":"flowdock","email":"team@flowdock.com"}],"dist":{"shasum":"d725d93c5b712de793ae6567a0d9176ea174cb96","tarball":"http://registry.npmjs.org/hubot-deploy-status/-/hubot-deploy-status-0.2.3.tgz"}},"0.3.0":{"name":"hubot-deploy-status","version":"0.3.0","description":"Check deployment statuses from GitHub","main":"index.coffee","scripts":{"test":"script/test"},"repository":{"type":"git","url":"https://github.com/flowdock/hubot-deploy-status.git"},"keywords":["hubot","deploy","hubot-script"],"author":{"name":"Flowdock","email":"team@flowdock.com"},"contributors":[{"name":"Otto Vehvilainen","email":"otto.vehvilainen@gmail.com"}],"license":"MIT","bugs":{"url":"https://github.com/flowdock/hubot-deploy-status/issues"},"homepage":"https://github.com/flowdock/hubot-deploy-status","dependencies":{"coffee-script":"^1.8.0","cron":"^1.0.5","octonode":"^0.6.7","request":"^2.47.0","sprintf":"^0.1.4","time":"^0.11.0","timeago":"^0.2.0"},"devDependencies":{"chai":"^1.9.2","mocha":"^1.21.4","sinon":"^1.10.3","sinon-chai":"^2.5.0"},"engines":{"node":">=0.8.0"},"gitHead":"a144d1684365a5ed026f35fcd1575720a9121b22","_id":"hubot-deploy-status@0.3.0","_shasum":"350dc3f1e90078fb902e7d4632b766d353b30a78","_from":".","_npmVersion":"1.4.14","_npmUser":{"name":"flowdock","email":"team@flowdock.com"},"maintainers":[{"name":"flowdock","email":"team@flowdock.com"}],"dist":{"shasum":"350dc3f1e90078fb902e7d4632b766d353b30a78","tarball":"http://registry.npmjs.org/hubot-deploy-status/-/hubot-deploy-status-0.3.0.tgz"}},"0.4.0":{"name":"hubot-deploy-status","version":"0.4.0","description":"Check deployment statuses from GitHub","main":"index.coffee","scripts":{"test":"script/test"},"repository":{"type":"git","url":"https://github.com/flowdock/hubot-deploy-status.git"},"keywords":["hubot","deploy","hubot-script"],"author":{"name":"Flowdock","email":"team@flowdock.com"},"contributors":[{"name":"Otto Vehvilainen","email":"otto.vehvilainen@gmail.com"}],"license":"MIT","bugs":{"url":"https://github.com/flowdock/hubot-deploy-status/issues"},"homepage":"https://github.com/flowdock/hubot-deploy-status","dependencies":{"coffee-script":"^1.8.0","cron":"^1.0.5","octonode":"^0.6.7","request":"^2.47.0","sprintf":"^0.1.4","time":"^0.11.0","timeago":"^0.2.0"},"devDependencies":{"chai":"^1.9.2","mocha":"^1.21.4","sinon":"^1.10.3","sinon-chai":"^2.5.0"},"engines":{"node":">=0.8.0"},"gitHead":"9077ade452a8a78345548051165235012d94305f","_id":"hubot-deploy-status@0.4.0","_shasum":"044a5ccc0647f930d6670c854ec768faa004eba7","_from":".","_npmVersion":"1.4.14","_npmUser":{"name":"flowdock","email":"team@flowdock.com"},"maintainers":[{"name":"flowdock","email":"team@flowdock.com"}],"dist":{"shasum":"044a5ccc0647f930d6670c854ec768faa004eba7","tarball":"http://registry.npmjs.org/hubot-deploy-status/-/hubot-deploy-status-0.4.0.tgz"}},"0.4.1":{"name":"hubot-deploy-status","version":"0.4.1","description":"Check deployment statuses from GitHub","main":"index.coffee","scripts":{"test":"script/test"},"repository":{"type":"git","url":"https://github.com/flowdock/hubot-deploy-status.git"},"keywords":["hubot","deploy","hubot-script"],"author":{"name":"Flowdock","email":"team@flowdock.com"},"contributors":[{"name":"Otto Vehvilainen","email":"otto.vehvilainen@gmail.com"}],"license":"MIT","bugs":{"url":"https://github.com/flowdock/hubot-deploy-status/issues"},"homepage":"https://github.com/flowdock/hubot-deploy-status","dependencies":{"coffee-script":"^1.8.0","cron":"^1.0.5","octonode":"^0.6.7","request":"^2.47.0","sprintf":"^0.1.4","time":"^0.11.0","timeago":"^0.2.0"},"devDependencies":{"chai":"^1.9.2","mocha":"^1.21.4","sinon":"^1.10.3","sinon-chai":"^2.5.0"},"engines":{"node":">=0.8.0"},"gitHead":"f9cc67686f3a7a68974ca973cb12ef5e8df9f352","_id":"hubot-deploy-status@0.4.1","_shasum":"d94be20ab2e52435119fd17887f589c2a55c70f7","_from":".","_npmVersion":"1.4.14","_npmUser":{"name":"flowdock","email":"team@flowdock.com"},"maintainers":[{"name":"flowdock","email":"team@flowdock.com"}],"dist":{"shasum":"d94be20ab2e52435119fd17887f589c2a55c70f7","tarball":"http://registry.npmjs.org/hubot-deploy-status/-/hubot-deploy-status-0.4.1.tgz"}},"0.4.2":{"name":"hubot-deploy-status","version":"0.4.2","description":"Check deployment statuses from GitHub","main":"index.coffee","scripts":{"test":"script/test"},"repository":{"type":"git","url":"git+https://github.com/flowdock/hubot-deploy-status.git"},"keywords":["hubot","deploy","hubot-script"],"author":{"name":"Flowdock","email":"team@flowdock.com"},"contributors":[{"name":"Otto Vehvilainen","email":"otto.vehvilainen@gmail.com"}],"license":"MIT","bugs":{"url":"https://github.com/flowdock/hubot-deploy-status/issues"},"homepage":"https://github.com/flowdock/hubot-deploy-status","dependencies":{"coffee-script":"^1.8.0","cron":"^1.0.5","octonode":"^0.6.7","request":"^2.47.0","sprintf":"^0.1.4","time":"^0.11.0","timeago":"^0.2.0"},"devDependencies":{"chai":"^1.9.2","mocha":"^1.21.4","sinon":"^1.10.3","sinon-chai":"^2.5.0"},"engines":{"node":">=0.8.0"},"gitHead":"ab4c3cdae02fa078ab7e7bf60dd2de9e1111514e","_id":"hubot-deploy-status@0.4.2","_shasum":"ef40864e528d9a2c8182d59cf8105456b0b2aa72","_from":".","_npmVersion":"2.14.4","_nodeVersion":"4.1.2","_npmUser":{"name":"flowdock","email":"team@flowdock.com"},"maintainers":[{"name":"flowdock","email":"team@flowdock.com"}],"dist":{"shasum":"ef40864e528d9a2c8182d59cf8105456b0b2aa72","tarball":"http://registry.npmjs.org/hubot-deploy-status/-/hubot-deploy-status-0.4.2.tgz"}}},"readme":"hubot-deploy-status\n===================\n\nCheck deployment statuses from GitHub. Tries to use same data and configs that's available for [hubot-deploy](https://github.com/atmos/hubot-deploy). Reads app config from `apps.json` and uses `HUBOT_GITHUB_TOKEN` or a user's personal deploy token (see `hubot-deploy`) if that's available to make api requests.\n\nThe script will fetch the latest deployment for an app (in specified environment) and display its status compared to the master (repo default) branch.\n\nThe script will also allow automatic cron-like deployment status checks, so your hubot can be configured to notify you if some environment for an app is not up to date (for example one component hasn't been deployed to production).\n\nTokens\n------\n\nPlease not that to work, the GitHub tokens used must have `user,repo` oauth scopes. hubot-deploy requires only `repo_deployment` scope but that's not enough for this script.\n\nUsage\n-----\n\nFor app that's configured with name `example-app` and has environments `staging` and `production`, you can say\n\n```\nhubot deploy-status for example-app in staging\n```\n\nand the response will be something like\n\n```\nHubot:\n\nApp example is 4 commits ahead master in staging.\nThe deployed ref is deploy-with-heaven (e429769).\n\nCommits not in master:\ne88769b Mumakil  Bump version\n6f23b1a Mumakil  Create a separate group for deploy gems\n7e2aaae Mumakil  Use capistrano-flowdock for deploy notifications\ne429769 Mumakil  Use double quotes in gemfile\n\n```\n\nTo check which apps and envs can be queried:\n\n```\nhubot deploy-status\n```\n\nTo toggle / turn on / turn on / check status of configured automatic checks\n\n```\n# what apps and envs are automatically checked\nhubot deploy-status:auto\n\n# Turn all checks off\nhubot deploy-status:auto off\n\n# Toggle specific environment\nhubot deploy-status:auto toggle app1 in production\n\n# Turn on all environments for an app\nhubot deploy-status:auto on for app1\n```\n\nAutomatic checks and adapters\n-----------------------------\n\nIt's possible to use a different adapters to handle the automatic status check posting. Currently by default the script will post fairly simple messages to chat. Another option if you're a Flowdock user is to use Flowdock adapter.\n\nTL;DR Supported adapters at the moment are `default` and `flowdock`.\n\n\nConfiguration\n-------------\n\nIn general, the script will need `HUBOT_GITHUB_TOKEN`, which you will probably already have if your hubot interacts with github. If you want to have full functionality, the token must have `user,repo` oauth scopes.\n\nThe following environment variables can be set and will be used as defaults, but individual apps can override the settings. Examples included:\n\n```\nDEPLOY_STATUS_TIMEZONE=Europe/Helsinki\nDEPLOY_STATUS_ROOM=acdcabbacd0123456789\nDEPLOY_STATUS_ADAPTER=flowdock\n```\nFlowdock adapter supports additional:\n```\nDEPLOY_STATUS_SOURCE_TOKEN=9559e07bea935d55657bfdcb8d2b9c2c\nDEPLOY_STATUS_AUTHOR_NAME=Hubot\nDEPLOY_STATUS_AUTHOR_AVATAR=http://www.example.com/avatar.jpg\n```\n\nThen, in `apps.json`, you can configure the automatic status using cron-like syntax:\n```javascript\n{\n    // A simple case with just production environment.\n    // Check the status once every work day at 8am and post\n    // results to the default chat room in env DEPLOY_STATUS_ROOM.\n    \"example1\": {\n        \"provider\": \"heroku\",\n        \"repository\": \"acme/example1\",\n        \"check_deploy_status\": {\n            \"environments\": {\n                \"production\": \"0 0 8 * * 1-5\"\n            }\n        }\n    },\n    // A little more complex example with multiple environments.\n    // Checks production every workday at 8am and staging environment every\n    // two hours overriding adapter and room.\n    \"example2\": {\n        \"provider\": \"bundler_capistrano\",\n        \"repository\": \"acme/example2\",\n        \"environments\": [\"staging\", \"production\"],\n        \"check_deploy_status\": {\n            \"environments\": {\n                \"production\": \"0 0 8 * * 1-5\",\n                \"staging\": \"0 0 8-18/2 * * 1-5\"\n            },\n            \"adapter\": \"default\",\n            \"room\": \"14dc03c3-8c97-45a5-8432-59df312e7c1b\"\n        }\n    }\n}\n\n```\n\nThe script uses [cron package](https://www.npmjs.org/package/cron), so the cron pattern can be anything that package understands. Timezones are from [time package](https://www.npmjs.org/package/time).\n","maintainers":[{"name":"flowdock","email":"team@flowdock.com"}],"time":{"modified":"2015-10-22T08:46:01.668Z","created":"2014-10-03T11:43:33.775Z","0.1.0":"2014-10-03T11:43:33.775Z","0.2.0":"2014-10-06T13:10:14.257Z","0.2.1":"2014-10-06T13:48:56.775Z","0.2.2":"2014-10-09T11:59:00.034Z","0.2.3":"2014-10-10T11:56:29.818Z","0.3.0":"2014-10-30T10:36:01.666Z","0.4.0":"2014-10-31T08:20:22.862Z","0.4.1":"2014-10-31T10:23:37.934Z","0.4.2":"2015-10-22T08:46:01.668Z"},"homepage":"https://github.com/flowdock/hubot-deploy-status","keywords":["hubot","deploy","hubot-script"],"repository":{"type":"git","url":"git+https://github.com/flowdock/hubot-deploy-status.git"},"contributors":[{"name":"Otto Vehvilainen","email":"otto.vehvilainen@gmail.com"}],"author":{"name":"Flowdock","email":"team@flowdock.com"},"bugs":{"url":"https://github.com/flowdock/hubot-deploy-status/issues"},"license":"MIT","readmeFilename":"README.md","users":{"mumakil":true}}
