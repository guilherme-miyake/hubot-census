{"_id":"hubot-commands","_rev":"2-ab216fdf8ef81829049ed785ea981ff8","name":"hubot-commands","description":"A library to produce parseable commands for hubot","dist-tags":{"latest":"1.1.0"},"versions":{"0.1.0":{"name":"hubot-commands","version":"0.1.0","description":"A library to produce parseable commands for hubot","main":"index.js","scripts":{"test":"test.js"},"dependencies":{"bluebird":"3.0.5"},"devDependencies":{"mocha":"2.3.4","chai":"3.4.1","chai-as-promised":"5.1.0"},"keywords":["hubot","command"],"author":{"name":"Loïc Prieto","email":"loic.sephiroth@gmail.com"},"license":"LGPL-3.0","homepage":"https://github.com/loic-prieto/hubot-command","gitHead":"609ae83eb2833a107ba1f12996d3739c25626b6e","_id":"hubot-commands@0.1.0","_shasum":"e136cfae9da340241208fc0bfbe82058d66ea3ab","_from":".","_npmVersion":"3.3.12","_nodeVersion":"5.1.0","_npmUser":{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"},"dist":{"shasum":"e136cfae9da340241208fc0bfbe82058d66ea3ab","tarball":"http://registry.npmjs.org/hubot-commands/-/hubot-commands-0.1.0.tgz"},"maintainers":[{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"}]},"0.2.0":{"name":"hubot-commands","version":"0.2.0","description":"A library to produce parseable commands for hubot","main":"index.js","scripts":{"test":"mocha test.js"},"dependencies":{"bluebird":"3.0.5"},"devDependencies":{"mocha":"2.3.4","chai":"3.4.1","chai-as-promised":"5.1.0"},"keywords":["hubot","command"],"author":{"name":"Loïc Prieto","email":"loic.sephiroth@gmail.com"},"license":"LGPL-3.0","homepage":"https://github.com/loic-prieto/hubot-command","gitHead":"fa9dc4ae6abf54fdd476277a03273c102fe3b99a","_id":"hubot-commands@0.2.0","_shasum":"dd3471d15be6ef66013122034835bd6f0dc4dc8b","_from":".","_npmVersion":"3.3.12","_nodeVersion":"5.1.0","_npmUser":{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"},"dist":{"shasum":"dd3471d15be6ef66013122034835bd6f0dc4dc8b","tarball":"http://registry.npmjs.org/hubot-commands/-/hubot-commands-0.2.0.tgz"},"maintainers":[{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"}]},"0.2.1":{"name":"hubot-commands","version":"0.2.1","description":"A library to produce parseable commands for hubot","main":"index.js","scripts":{"test":"mocha test.js"},"dependencies":{"bluebird":"3.0.5"},"devDependencies":{"mocha":"2.3.4","chai":"3.4.1","chai-as-promised":"5.1.0"},"keywords":["hubot","command"],"repository":{"type":"git","url":"git+https://github.com/loic-prieto/hubot-command.git"},"author":{"name":"Loïc Prieto","email":"loic.sephiroth@gmail.com"},"license":"LGPL-3.0","homepage":"https://github.com/loic-prieto/hubot-command","gitHead":"4be73ba8a45a4e885f66d45e306aaa476d0c2583","bugs":{"url":"https://github.com/loic-prieto/hubot-command/issues"},"_id":"hubot-commands@0.2.1","_shasum":"a8d52211768f69eb7e10a766a7f0bbfd25c5ebf0","_from":".","_npmVersion":"2.14.7","_nodeVersion":"4.2.2","_npmUser":{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"},"dist":{"shasum":"a8d52211768f69eb7e10a766a7f0bbfd25c5ebf0","tarball":"http://registry.npmjs.org/hubot-commands/-/hubot-commands-0.2.1.tgz"},"maintainers":[{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"}]},"0.2.2":{"name":"hubot-commands","version":"0.2.2","description":"A library to produce parseable commands for hubot","main":"index.js","scripts":{"test":"mocha test.js"},"dependencies":{"bluebird":"3.0.5"},"devDependencies":{"mocha":"2.3.4","chai":"3.4.1","chai-as-promised":"5.1.0"},"keywords":["hubot","command"],"repository":{"type":"git","url":"git+https://github.com/loic-prieto/hubot-command.git"},"author":{"name":"Loïc Prieto","email":"loic.sephiroth@gmail.com"},"license":"LGPL-3.0","homepage":"https://github.com/loic-prieto/hubot-command","gitHead":"3cedb73eec98a72dc2b1754ca6f150dc55af6603","bugs":{"url":"https://github.com/loic-prieto/hubot-command/issues"},"_id":"hubot-commands@0.2.2","_shasum":"f4b2dc8da42266c17930baedf1ee7eeb6b3a3888","_from":".","_npmVersion":"3.3.12","_nodeVersion":"5.1.0","_npmUser":{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"},"dist":{"shasum":"f4b2dc8da42266c17930baedf1ee7eeb6b3a3888","tarball":"http://registry.npmjs.org/hubot-commands/-/hubot-commands-0.2.2.tgz"},"maintainers":[{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"}]},"0.3.0":{"name":"hubot-commands","version":"0.3.0","description":"A library to produce parseable commands for hubot","main":"index.js","scripts":{"test":"mocha test.js"},"dependencies":{"bluebird":"3.0.5"},"devDependencies":{"mocha":"2.3.4","chai":"3.4.1","chai-as-promised":"5.1.0"},"keywords":["hubot","command"],"repository":{"type":"git","url":"git+https://github.com/loic-prieto/hubot-command.git"},"author":{"name":"Loïc Prieto","email":"loic.sephiroth@gmail.com"},"license":"LGPL-3.0","homepage":"https://github.com/loic-prieto/hubot-command","gitHead":"cbe5a0b263387c400e567778f9d830be60b8c29f","bugs":{"url":"https://github.com/loic-prieto/hubot-command/issues"},"_id":"hubot-commands@0.3.0","_shasum":"07c216e723957fc53f939969642a382fbf89bdeb","_from":".","_npmVersion":"3.3.12","_nodeVersion":"5.1.0","_npmUser":{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"},"dist":{"shasum":"07c216e723957fc53f939969642a382fbf89bdeb","tarball":"http://registry.npmjs.org/hubot-commands/-/hubot-commands-0.3.0.tgz"},"maintainers":[{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"}]},"0.3.1":{"name":"hubot-commands","version":"0.3.1","description":"A library to produce parseable commands for hubot","main":"index.js","scripts":{"test":"mocha test.js"},"dependencies":{"bluebird":"3.0.5"},"devDependencies":{"mocha":"2.3.4","chai":"3.4.1","chai-as-promised":"5.1.0"},"keywords":["hubot","command"],"repository":{"type":"git","url":"git+https://github.com/loic-prieto/hubot-command.git"},"author":{"name":"Loïc Prieto","email":"loic.sephiroth@gmail.com"},"license":"LGPL-3.0","homepage":"https://github.com/loic-prieto/hubot-command","gitHead":"51167e4896c9b6e150eebe10668f22de0071b23e","bugs":{"url":"https://github.com/loic-prieto/hubot-command/issues"},"_id":"hubot-commands@0.3.1","_shasum":"16c13716d713a323cec7bd966f45de8b65e8c140","_from":".","_npmVersion":"3.3.12","_nodeVersion":"5.1.0","_npmUser":{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"},"dist":{"shasum":"16c13716d713a323cec7bd966f45de8b65e8c140","tarball":"http://registry.npmjs.org/hubot-commands/-/hubot-commands-0.3.1.tgz"},"maintainers":[{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"}]},"0.4.0":{"name":"hubot-commands","version":"0.4.0","description":"A library to produce parseable commands for hubot","main":"index.js","scripts":{"test":"mocha test.js"},"dependencies":{"bluebird":"3.0.5","ioredis":"1.15.1"},"devDependencies":{"mocha":"2.3.4","chai":"3.4.1","chai-as-promised":"5.1.0"},"keywords":["hubot","command"],"repository":{"type":"git","url":"git+https://github.com/loic-prieto/hubot-command.git"},"author":{"name":"Loïc Prieto","email":"loic.sephiroth@gmail.com"},"license":"LGPL-3.0","homepage":"https://github.com/loic-prieto/hubot-command","gitHead":"5f0542dc88b6d18eda8e908da1e7775b6b6ff0d4","bugs":{"url":"https://github.com/loic-prieto/hubot-command/issues"},"_id":"hubot-commands@0.4.0","_shasum":"d632d9c259c3cbbdc62d63b6d17aabd6b95a0715","_from":".","_npmVersion":"2.14.7","_nodeVersion":"4.2.2","_npmUser":{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"},"dist":{"shasum":"d632d9c259c3cbbdc62d63b6d17aabd6b95a0715","tarball":"http://registry.npmjs.org/hubot-commands/-/hubot-commands-0.4.0.tgz"},"maintainers":[{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/hubot-commands-0.4.0.tgz_1463503231885_0.7317505590617657"}},"1.0.0":{"name":"hubot-commands","version":"1.0.0","description":"A library to produce parseable commands for hubot","main":"index.js","scripts":{"test":"mocha test.js"},"dependencies":{"bluebird":"3.0.5","ioredis":"1.15.1"},"devDependencies":{"mocha":"2.3.4","chai":"3.4.1","chai-as-promised":"5.1.0"},"keywords":["hubot","command"],"repository":{"type":"git","url":"git+https://github.com/loic-prieto/hubot-command.git"},"author":{"name":"Loïc Prieto","email":"loic.sephiroth@gmail.com"},"license":"LGPL-3.0","homepage":"https://github.com/loic-prieto/hubot-command","gitHead":"5f0542dc88b6d18eda8e908da1e7775b6b6ff0d4","bugs":{"url":"https://github.com/loic-prieto/hubot-command/issues"},"_id":"hubot-commands@1.0.0","_shasum":"d7d0b151ca1d3e44bb1def219f194cb76891e0bc","_from":".","_npmVersion":"2.14.7","_nodeVersion":"4.2.2","_npmUser":{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"},"dist":{"shasum":"d7d0b151ca1d3e44bb1def219f194cb76891e0bc","tarball":"http://registry.npmjs.org/hubot-commands/-/hubot-commands-1.0.0.tgz"},"maintainers":[{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/hubot-commands-1.0.0.tgz_1464883046403_0.8932352170813829"}},"1.1.0":{"name":"hubot-commands","version":"1.1.0","description":"A library to produce parseable commands for hubot","main":"index.js","scripts":{"test":"mocha test.js"},"dependencies":{"bluebird":"3.0.5","ioredis":"1.15.1"},"devDependencies":{"mocha":"2.3.4","chai":"3.4.1","chai-as-promised":"5.1.0"},"keywords":["hubot","command"],"repository":{"type":"git","url":"git+https://github.com/loic-prieto/hubot-command.git"},"author":{"name":"Loïc Prieto","email":"loic.sephiroth@gmail.com"},"license":"LGPL-3.0","homepage":"https://github.com/loic-prieto/hubot-command","gitHead":"026ea2f51ad37ba334390bfc9a20ecccad45f36d","bugs":{"url":"https://github.com/loic-prieto/hubot-command/issues"},"_id":"hubot-commands@1.1.0","_shasum":"9aa6607a043363bc812e034d8773a79fb78596b6","_from":".","_npmVersion":"3.10.3","_nodeVersion":"6.5.0","_npmUser":{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"},"dist":{"shasum":"9aa6607a043363bc812e034d8773a79fb78596b6","tarball":"http://registry.npmjs.org/hubot-commands/-/hubot-commands-1.1.0.tgz"},"maintainers":[{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"}],"_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/hubot-commands-1.1.0.tgz_1473445174198_0.17055326630361378"}}},"readme":"# hubot-command\r\nA library to let hubot parse commands and execute them in an easy manner.\r\n\r\n## Usage\r\n\r\nIn the hubot main folder's package.json:\r\n```json\r\n{\r\n  [...]\r\n  \"dependencies\":{\r\n    \"hubot-command\":\"x.y.z\"\r\n  }\r\n  [...]\r\n}\r\n````\r\nThere are two main classes: Command and Parameter.\r\n\r\nA command has a name and has zero to many parameters. For each command you want hubot to be able  to execute you will\r\nhave to subclass a Command, and the many Parameters it has. Full usage details can be seen in the provided tests, but \r\nhave a sample:\r\n\r\n_TestCommand.js_\r\n````javascript\r\nclass TestCommand extends Command {\r\n    constructor() {\r\n        super('test');\r\n        this.addParameter(new FromParameter(this));\r\n        this.addParameter(new ToParameter(this));\r\n        this.help = \"A test command to prove that the library works\";\r\n    }\r\n\r\n    //Will be invoked by the execute command that the client uses, it's \"private\" to the class.\r\n    run(){\r\n        this.model.executed = true;\r\n        return this.model; //I could also return a [bluebird] promise, not only objects.\r\n    }\r\n\r\n    validate(){\r\n        //Validates that the from date is before the to date\r\n        return this.model.from.getTime() < this.model.to.getTime();\r\n    }\r\n\r\n}\r\n````\r\n\r\n_FromParameter.js_\r\n````javascript\r\nclass FromParameter extends Parameter {\r\n    constructor(command){\r\n        super('from',command);\r\n        this.help.header = \"when to start\";\r\n        this.help.detail = \"From when to start the command. ISO8601 date format expected.\";\r\n    }\r\n\r\n    parse(date){\r\n        if(typeof date === 'undefined' || date === '') {\r\n            throw new ParseError('the \"from\" parameter cannot be empty');\r\n        }\r\n\r\n        this.command.model.from = new Date(date);\r\n    }\r\n}\r\n````\r\n\r\nOnce you have the commands, you can use them in your hubot code, like so:\r\n````javascript\r\nmodule.exports = function(robot){\r\n    robot.hear(/^bot (.*)$/,function(chat){\r\n        var command = chat.match[1];\r\n        //Here comes a dynamic dispatcher, but I'm simplifying for the example\r\n        var testCommand = new TestCommand();\r\n        if(testCommand.willParseCommand(command)){\r\n          testCommand.execute(command)\r\n            .then(function(result){\r\n              chat.send(\"I've processed the command given, master. May I have a candy? :smile:\");\r\n            });\r\n        } else {\r\n          chat.send('I do not understand your command, master :confused:');\r\n        }\r\n    });\r\n};\r\n````\r\n\r\n## Implementation\r\nThe library is implemented as pure javascript, instead of CoffeeScript. Ecmascript 6 classes and arrow functions are used for OOP syntactic sugar, so\r\na compatible nodejs runtime is needed (6.x+)\r\n\r\nBluebird is used for promise handling.\r\n\r\nTests are executed with mocha and asserts are using chai assert style, with a sprinkle of chai-as-promised. All integrated with npm, of course.\r\n","maintainers":[{"name":"loic-prieto","email":"loic.sephiroth@gmail.com"}],"time":{"modified":"2016-09-09T18:19:35.768Z","created":"2015-11-29T23:56:14.338Z","0.1.0":"2015-11-29T23:56:14.338Z","0.2.0":"2015-12-02T23:03:49.551Z","0.2.1":"2015-12-03T18:55:23.816Z","0.2.2":"2015-12-05T01:58:32.587Z","0.3.0":"2015-12-08T00:40:19.166Z","0.3.1":"2015-12-08T00:52:13.315Z","0.4.0":"2016-05-17T16:40:34.371Z","1.0.0":"2016-06-02T15:57:28.789Z","1.1.0":"2016-09-09T18:19:35.768Z"},"homepage":"https://github.com/loic-prieto/hubot-command","keywords":["hubot","command"],"author":{"name":"Loïc Prieto","email":"loic.sephiroth@gmail.com"},"license":"LGPL-3.0","readmeFilename":"README.md","repository":{"type":"git","url":"git+https://github.com/loic-prieto/hubot-command.git"},"bugs":{"url":"https://github.com/loic-prieto/hubot-command/issues"}}
