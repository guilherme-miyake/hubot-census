{"_id":"hubot-sbueringer-grafana","_rev":"3-0a4043e02a2ed9ccfbe99994807f7aa2","name":"hubot-sbueringer-grafana","description":"Query Grafana dashboards","dist-tags":{"latest":"1.7.2"},"versions":{"1.7.0":{"name":"hubot-sbueringer-grafana","description":"Query Grafana dashboards","version":"1.7.0","author":{"name":"Stefan Bueringer","email":"npm.sbueringer@gmail.com"},"license":"MIT","keywords":["hubot","hubot-scripts","grafana","graphs"],"repository":{"type":"git","url":"git://github.com/sbueringer/hubot-grafana.git"},"bugs":{"url":"https://github.com/sbueringer/hubot-grafana/issues"},"dependencies":{"knox":"^0.9.2","request":"^2.58.0","mattermost-client":"^3.7.3"},"peerDependencies":{"hubot":"2.x"},"devDependencies":{"blanket":"^1.2.1","chai":"^2.1.1","coffee-script":"1.10.0","coveralls":"^2.11.6","grunt":"^0.4.5","grunt-cli":"^0.1.13","grunt-contrib-watch":"~0.6.1","grunt-mocha-test":"~0.12.7","grunt-release":"~0.11.0","hubot":"2.x","hubot-test-helper":"0.0.6","husky":"^0.13.3","matchdep":"~0.3.0","mattermost ":"~3.4.0","mocha":"^2.1.0","mocha-lcov-reporter":"^1.0.0","nock":"^2.3.0","require-dir":"^0.3.0","sinon":"^1.13.0","sinon-chai":"^2.7.0","travis-cov":"^0.2.5"},"config":{"blanket":{"pattern":"src","data-cover-never":"node_modules","loader":"./node-loaders/coffee-script"}},"main":"index.coffee","scripts":{"test":"grunt test","precommit":"npm test","prepush":"npm test"},"gitHead":"94551a799becce58725715b592aa19b3bbedfa20","homepage":"https://github.com/sbueringer/hubot-grafana#readme","_id":"hubot-sbueringer-grafana@1.7.0","_shasum":"975bfe513f3cc325c11532f115303762546e5253","_from":".","_npmVersion":"4.2.0","_nodeVersion":"7.10.0","_npmUser":{"name":"sbueringer","email":"npm.sbueringer@gmail.com"},"dist":{"shasum":"975bfe513f3cc325c11532f115303762546e5253","tarball":"https://registry.npmjs.org/hubot-sbueringer-grafana/-/hubot-sbueringer-grafana-1.7.0.tgz"},"maintainers":[{"name":"sbueringer","email":"npm.sbueringer@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hubot-sbueringer-grafana-1.7.0.tgz_1495725952842_0.2765353010036051"}},"1.7.1":{"name":"hubot-sbueringer-grafana","description":"Query Grafana dashboards","version":"1.7.1","author":{"name":"Stefan Bueringer","email":"npm.sbueringer@gmail.com"},"license":"MIT","keywords":["hubot","hubot-scripts","grafana","graphs"],"repository":{"type":"git","url":"git://github.com/sbueringer/hubot-grafana.git"},"bugs":{"url":"https://github.com/sbueringer/hubot-grafana/issues"},"dependencies":{"knox":"^0.9.2","request":"^2.58.0","sbueringer-mattermost-client":"^4.0.0"},"peerDependencies":{"hubot":"2.x"},"devDependencies":{"blanket":"^1.2.1","chai":"^2.1.1","coffee-script":"1.10.0","coveralls":"^2.11.6","grunt":"^0.4.5","grunt-cli":"^0.1.13","grunt-contrib-watch":"~0.6.1","grunt-mocha-test":"~0.12.7","grunt-release":"~0.11.0","hubot":"2.x","hubot-test-helper":"0.0.6","husky":"^0.13.3","matchdep":"~0.3.0","mattermost ":"~3.4.0","mocha":"^2.1.0","mocha-lcov-reporter":"^1.0.0","nock":"^2.3.0","require-dir":"^0.3.0","sinon":"^1.13.0","sinon-chai":"^2.7.0","travis-cov":"^0.2.5"},"config":{"blanket":{"pattern":"src","data-cover-never":"node_modules","loader":"./node-loaders/coffee-script"}},"main":"index.coffee","scripts":{"test":"grunt test","precommit":"npm test","prepush":"npm test"},"gitHead":"108573d4009bbb7c0082b07b012dd552f304be14","homepage":"https://github.com/sbueringer/hubot-grafana#readme","_id":"hubot-sbueringer-grafana@1.7.1","_shasum":"95abcf7849312488f17c6352dc66657774948aaa","_from":".","_npmVersion":"4.2.0","_nodeVersion":"7.10.0","_npmUser":{"name":"sbueringer","email":"npm.sbueringer@gmail.com"},"dist":{"shasum":"95abcf7849312488f17c6352dc66657774948aaa","tarball":"https://registry.npmjs.org/hubot-sbueringer-grafana/-/hubot-sbueringer-grafana-1.7.1.tgz"},"maintainers":[{"name":"sbueringer","email":"npm.sbueringer@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hubot-sbueringer-grafana-1.7.1.tgz_1495726978477_0.20847088191658258"}},"1.7.2":{"name":"hubot-sbueringer-grafana","description":"Query Grafana dashboards","version":"1.7.2","author":{"name":"Stefan Bueringer","email":"npm.sbueringer@gmail.com"},"license":"MIT","keywords":["hubot","hubot-scripts","grafana","graphs"],"repository":{"type":"git","url":"git://github.com/sbueringer/hubot-grafana.git"},"bugs":{"url":"https://github.com/sbueringer/hubot-grafana/issues"},"dependencies":{"knox":"^0.9.2","request":"^2.58.0","sbueringer-mattermost-client":"^4.0.0"},"peerDependencies":{"hubot":"2.x"},"devDependencies":{"blanket":"^1.2.1","chai":"^2.1.1","coffee-script":"1.10.0","coveralls":"^2.11.6","grunt":"^0.4.5","grunt-cli":"^0.1.13","grunt-contrib-watch":"~0.6.1","grunt-mocha-test":"~0.12.7","grunt-release":"~0.11.0","hubot":"2.x","hubot-test-helper":"0.0.6","husky":"^0.13.3","matchdep":"~0.3.0","mattermost ":"~3.4.0","mocha":"^2.1.0","mocha-lcov-reporter":"^1.0.0","nock":"^2.3.0","require-dir":"^0.3.0","sinon":"^1.13.0","sinon-chai":"^2.7.0","travis-cov":"^0.2.5"},"config":{"blanket":{"pattern":"src","data-cover-never":"node_modules","loader":"./node-loaders/coffee-script"}},"main":"index.coffee","scripts":{"test":"grunt test","precommit":"npm test","prepush":"npm test"},"gitHead":"af0c62c10444e7a526955cb3f38b06920edf7ae7","homepage":"https://github.com/sbueringer/hubot-grafana#readme","_id":"hubot-sbueringer-grafana@1.7.2","_shasum":"9c4ac14624bf159a63034ca325e0f46e924999f8","_from":".","_npmVersion":"4.2.0","_nodeVersion":"7.10.0","_npmUser":{"name":"sbueringer","email":"npm.sbueringer@gmail.com"},"dist":{"shasum":"9c4ac14624bf159a63034ca325e0f46e924999f8","tarball":"https://registry.npmjs.org/hubot-sbueringer-grafana/-/hubot-sbueringer-grafana-1.7.2.tgz"},"maintainers":[{"name":"sbueringer","email":"npm.sbueringer@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hubot-sbueringer-grafana-1.7.2.tgz_1495727538718_0.29053090093657374"}}},"readme":"# Grafana for Hubot\n\n[![Build Status](https://travis-ci.org/sbueringer/hubot-grafana.png)](https://travis-ci.org/sbueringer/hubot-grafana)\n\n![Screenshot](http://docs.grafana.org/img/tutorials/hubot_grafana.png)\n\nUse Hubot to query Grafana dashboards. Inspired by the work of [`hubot-graphite`](https://github.com/github/hubot-scripts/blob/master/src/scripts/graphite.coffee) and [`hubot-graphme`](https://github.com/rick/hubot-graphme). Check out the [HOWTO](http://docs.grafana.org/tutorials/hubot_howto/) to get started with the bot.\n\n**Note:** This package requires Grafana 2.x or higher.\n\n## Installation\n\nIn the Hubot project repo, run:\n\n`npm install hubot-sbueringer-grafana --save`\n\nThen add **hubot-sbueringer-grafana** to your `external-scripts.json`:\n\n```json\n[\n  \"hubot-sbueringer-grafana\"\n]\n```\n\n## Configuration Variables\n\n### General Settings\n\n| Configuration Variable           | Required | Description                    |\n| -------------------------------- | -------- | ------------------------------ |\n| `HUBOT_GRAFANA_HOST`             | **Yes**  | Host for your Grafana 2.x install, e.g. `http://play.grafana.org` |\n| `HUBOT_GRAFANA_API_KEY`          | _Yes^_   | Grafana API key (This can be \"Viewer\" role.) |\n| `HUBOT_GRAFANA_QUERY_TIME_RANGE` | No       | Default time range for queries (defaults to 6h) |\n\n^ _Not required for `auth.anonymous` Grafana configurations. All other authentication models will require a user-specific API key._\n\n### Amazon S3 Image Hosting\n\nRecommended if you use a service such as Slack or HipChat. You can omit all of these settings if you do not plan to use S3.\n\nGraphs are downloaded to the box running **hubot-sbueringer-grafana** and then uploaded to S3 with world-readable rights, so you do not have to do anything special to your S3 bucket in order to serve the graph images suitable for Slack or HipChat.  E.g., you do not have to set up web hosting for your S3 bucket.\n\n| Configuration Variable               | Required | Description                |\n| ------------------------------------ | -------- | -------------------------- |\n| `HUBOT_GRAFANA_S3_BUCKET`            | **Yes**  | Name of the S3 bucket to copy the graph into |\n| `HUBOT_GRAFANA_S3_ACCESS_KEY_ID`     | **Yes**  | Access key ID for S3 |\n| `HUBOT_GRAFANA_S3_SECRET_ACCESS_KEY` | **Yes**  | Secret access key for S3 |\n| `HUBOT_GRAFANA_S3_PREFIX`            | No       | Bucket prefix (useful for shared buckets) |\n| `HUBOT_GRAFANA_S3_REGION`            | No       | Bucket region (defaults to us-standard) |\n| `HUBOT_GRAFANA_S3_ENDPOINT`          | No       | Endpoint of the S3 API (useful for S3 compatible API, defaults to s3.amazonaws.com) |\n| `HUBOT_GRAFANA_S3_PORT`              | No       | Port of the S3 endpoint\n| `HUBOT_GRAFANA_S3_STYLE`             | No       | Bucket style of the S3 endpoint 'virtualHosted' or 'path' defaults to 'virtualHosted' |\n\nYou most likely want to add an S3 Life Cycle Configuration that will \"Permanently Delete\" the graphs after 1 hour or 1 day, as appropriate for your organization.\n\n#### Hosting **hubot-sbueringer-grafana** _within_ AWS.\n\nEC2 IAM Roles will _not_ be used.  In order for your **hubot-sbueringer-grafana** to be allowed to store graphs in S3 that can be referenced via Slack or HipChat, the IAM user with the credentials you run **hubot-sbueringer-grafana** as should have an IAM user policy such as:\n\n```\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:ListBucket\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::YOUR-BUCKET-NAME\"\n            ]\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:PutObject\",\n                \"s3:GetObject\",\n                \"s3:DeleteObject\",\n                \"s3:PutObjectAcl\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::YOUR-BUCKET-NAME/*\"\n            ]\n        }\n    ]\n}\n```\n\n### Example Configuration\n\n```\nexport HUBOT_GRAFANA_HOST=http://play.grafana.org\nexport HUBOT_GRAFANA_API_KEY=abcd01234deadbeef01234\nexport HUBOT_GRAFANA_QUERY_TIME_RANGE=1h\nexport HUBOT_GRAFANA_S3_BUCKET=mybucket\nexport HUBOT_GRAFANA_S3_ACCESS_KEY_ID=ABCDEF123456XYZ\nexport HUBOT_GRAFANA_S3_SECRET_ACCESS_KEY=aBcD01234dEaDbEef01234\nexport HUBOT_GRAFANA_S3_PREFIX=graphs\n```\n\n## Sample Interaction\n\n```\nuser1>> hubot graf db graphite-carbon-metrics\nhubot>> Graphite Carbon Metrics: http://play.grafana.org/render/dashboard/solo/graphite-carbon-metrics/?panelId=1&width=1000&height=500&from=now-6h - http://play.grafana.org/dashboard/db/graphite-carbon-metrics/?panelId=1&fullscreen&from=now-6h\n```\n\n## Grafana Commands\n\n### Retrieve a Dashboard\n\nGet all panels in a dashboard. In this example, `graphite-carbon-metrics` is the slug for the given dashboard.\n\n```\nhubot graf db graphite-carbon-metrics\n```\n\n### Retrieve Specific Panels\n\nGet a single panel of a dashboard. In this example, only the third panel would be returned. Note that this is the _visual_ panel ID, counted from top to bottom, left to right, rather than the unique identifier stored with the panel itself.\n\n```\nhubot graf db graphite-carbon-metrics:3\n```\n\nIf you want to refer to the API Panel ID, use the `:panel-<identifier>` format to retrieve it. These will not change when the dashboard is re-arranged.\n\n```\nhubot graf db graphite-carbon-metrics:panel-8\n```\n\nGet all panels matching a particular title (case insensitive) in a dashboard. In this case, only panels containing `cpu` would be returned.\n\n```\nhubot graf db graphite-carbon-metrics:cpu\n```\n\n### Retrieve Dashboards in a Time Window\n\nSpecify a time range for the dashboard. In this example, the dashboard would be set to display data from 12 hours ago to now.\n\n```\nhubot graf db graphite-carbon-metrics now-12hr\n```\n\nIf you don't want to show the dashboard uptil now, you can add an extra time specification, which will be the `to` time slot. In this example, the dashboard would be set to display data from 24 hours ago to 12 hours ago.\n\n```\nhubot graf db graphite-carbon-metrics now-24hr now-12hr\n```\n\nYou can combine multiple commands in this format as well. In this example, retrieve only the third panel of the `graphite-carbon-metrics` dashboard with a window of eight days ago to yesterday.\n\n```\nhubot graf db graphite-carbon-metrics:3 now-8d now-1d\n```\n\n### Templated Dashboards\n\nGrafana allows dashboards to be set up as templates and accept arguments to generate them through the API. In this example, we get a templated dashboard with the `$host` parameter set to `carbon-a`\n\n```\nhubot graf db graphite-carbon-metrics host=carbon-a\n```\n\n### Utility Commands\n\nThis command retrieves all dashboards and their slugs so they can be used in other commands.\n\n```\nhubot graf list\n```\n\nDashboards can be tagged for easier reference. In this example, return all dashboards tagged with `production`.\n\n```\nhubot graf list production\n```\n\nSimilarly, you can search the list of dashboards. In this example, return all dashboards that contain the word `elb`.\n\n```\nhubot graf search elb\n```\n","maintainers":[{"name":"sbueringer","email":"npm.sbueringer@gmail.com"}],"time":{"modified":"2017-05-25T15:52:20.176Z","created":"2017-05-25T15:25:54.243Z","1.7.0":"2017-05-25T15:25:54.243Z","1.7.1":"2017-05-25T15:42:59.748Z","1.7.2":"2017-05-25T15:52:20.176Z"},"homepage":"https://github.com/sbueringer/hubot-grafana#readme","keywords":["hubot","hubot-scripts","grafana","graphs"],"repository":{"type":"git","url":"git://github.com/sbueringer/hubot-grafana.git"},"author":{"name":"Stefan Bueringer","email":"npm.sbueringer@gmail.com"},"bugs":{"url":"https://github.com/sbueringer/hubot-grafana/issues"},"license":"MIT","readmeFilename":"README.md"}
