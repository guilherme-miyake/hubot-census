{"_id":"hubot-temploy","_rev":"2-96130436e7958821a298872f70334fc6","name":"hubot-temploy","description":"Hubot script that temporarily deploys pull requests","dist-tags":{"latest":"0.2.3"},"versions":{"0.1.0":{"name":"hubot-temploy","version":"0.1.0","description":"Hubot script that temporarily deploys pull requests","main":"index.coffee","homepage":"https://github.com/p0deje/hubot-temploy","keywords":["hubot deploy github"],"author":{"name":"Alex Rodionov"},"license":"MIT","repository":{"type":"git","url":"git://github.com/p0deje/hubot-temploy.git"},"bugs":{"url":"https://github.com/p0deje/hubot-temploy/issues"},"dependencies":{"q":"*","js-yaml":"*"},"peerDependencies":{"hubot":"*"},"devDependencies":{"hubot":"*","coffee-script":"*","mocha":"*","chai":"*","sinon":"*","sinon-chai":"*","temp":"*","hubot-mock-adapter":"*"},"scripts":{"test":"mocha --compilers coffee:coffee-script/register $(find test -name '*_test.coffee' | sort -r)"},"gitHead":"2ebb6699074d86c523a67dc6c161e320b1091324","_id":"hubot-temploy@0.1.0","_shasum":"865c3ec7e994da84c37fb484659de5682f2ab4f7","_from":".","_npmVersion":"2.1.17","_nodeVersion":"0.10.35","_npmUser":{"name":"p0deje","email":"p0deje@gmail.com"},"maintainers":[{"name":"p0deje","email":"p0deje@gmail.com"}],"dist":{"shasum":"865c3ec7e994da84c37fb484659de5682f2ab4f7","tarball":"http://registry.npmjs.org/hubot-temploy/-/hubot-temploy-0.1.0.tgz"}},"0.1.1":{"name":"hubot-temploy","version":"0.1.1","description":"Hubot script that temporarily deploys pull requests","main":"index.coffee","homepage":"https://github.com/p0deje/hubot-temploy","keywords":["hubot","deploy","github"],"author":{"name":"Alex Rodionov"},"license":"MIT","repository":{"type":"git","url":"git://github.com/p0deje/hubot-temploy.git"},"bugs":{"url":"https://github.com/p0deje/hubot-temploy/issues"},"dependencies":{"q":"*","js-yaml":"*"},"peerDependencies":{"hubot":"*"},"devDependencies":{"hubot":"*","coffee-script":"*","mocha":"*","chai":"*","sinon":"*","sinon-chai":"*","temp":"*","hubot-mock-adapter":"*"},"scripts":{"test":"mocha --compilers coffee:coffee-script/register $(find test -name '*_test.coffee' | sort -r)"},"gitHead":"c20039f3bffe5578c106ca04860bb991f9b5846f","_id":"hubot-temploy@0.1.1","_shasum":"222fa06138dcd540e249a6ed65b3a995b1a7a65d","_from":".","_npmVersion":"2.1.17","_nodeVersion":"0.10.35","_npmUser":{"name":"p0deje","email":"p0deje@gmail.com"},"maintainers":[{"name":"p0deje","email":"p0deje@gmail.com"}],"dist":{"shasum":"222fa06138dcd540e249a6ed65b3a995b1a7a65d","tarball":"http://registry.npmjs.org/hubot-temploy/-/hubot-temploy-0.1.1.tgz"}},"0.1.2":{"name":"hubot-temploy","version":"0.1.2","description":"Hubot script that temporarily deploys pull requests","main":"index.coffee","homepage":"https://github.com/p0deje/hubot-temploy","keywords":["hubot","deploy","github"],"author":{"name":"Alex Rodionov"},"license":"MIT","repository":{"type":"git","url":"git://github.com/p0deje/hubot-temploy.git"},"bugs":{"url":"https://github.com/p0deje/hubot-temploy/issues"},"dependencies":{"q":"*","js-yaml":"*"},"peerDependencies":{"hubot":"*"},"devDependencies":{"hubot":"*","coffee-script":"*","mocha":"*","chai":"*","sinon":"*","sinon-chai":"*","temp":"*","hubot-mock-adapter":"*"},"scripts":{"test":"mocha --compilers coffee:coffee-script/register $(find test -name '*_test.coffee' | sort -r)"},"gitHead":"963b4f7bd1938d3a1de05be9cd838b82a7a32295","_id":"hubot-temploy@0.1.2","_shasum":"68d1df83f78740ed8f68c86cef3c211eba2648a7","_from":".","_npmVersion":"2.1.17","_nodeVersion":"0.10.35","_npmUser":{"name":"p0deje","email":"p0deje@gmail.com"},"maintainers":[{"name":"p0deje","email":"p0deje@gmail.com"}],"dist":{"shasum":"68d1df83f78740ed8f68c86cef3c211eba2648a7","tarball":"http://registry.npmjs.org/hubot-temploy/-/hubot-temploy-0.1.2.tgz"}},"0.1.3":{"name":"hubot-temploy","version":"0.1.3","description":"Hubot script that temporarily deploys pull requests","main":"index.coffee","homepage":"https://github.com/p0deje/hubot-temploy","keywords":["hubot","deploy","github"],"author":{"name":"Alex Rodionov"},"license":"MIT","repository":{"type":"git","url":"git://github.com/p0deje/hubot-temploy.git"},"bugs":{"url":"https://github.com/p0deje/hubot-temploy/issues"},"dependencies":{"q":"*","js-yaml":"*"},"peerDependencies":{"hubot":"*"},"devDependencies":{"hubot":"*","coffee-script":"*","mocha":"*","chai":"*","sinon":"*","sinon-chai":"*","temp":"*","hubot-mock-adapter":"*"},"scripts":{"test":"mocha --compilers coffee:coffee-script/register $(find test -name '*_test.coffee' | sort -r)"},"gitHead":"71029f84f56b0133e5f55cfe3bd09fc5cf938f8e","_id":"hubot-temploy@0.1.3","_shasum":"fe91ec6033aae073a2fc7596204ed5f6b34ef347","_from":".","_npmVersion":"2.1.17","_nodeVersion":"0.10.35","_npmUser":{"name":"p0deje","email":"p0deje@gmail.com"},"maintainers":[{"name":"p0deje","email":"p0deje@gmail.com"}],"dist":{"shasum":"fe91ec6033aae073a2fc7596204ed5f6b34ef347","tarball":"http://registry.npmjs.org/hubot-temploy/-/hubot-temploy-0.1.3.tgz"}},"0.1.4":{"name":"hubot-temploy","version":"0.1.4","description":"Hubot script that temporarily deploys pull requests","main":"index.coffee","homepage":"https://github.com/p0deje/hubot-temploy","keywords":["hubot","deploy","github"],"author":{"name":"Alex Rodionov"},"license":"MIT","repository":{"type":"git","url":"git://github.com/p0deje/hubot-temploy.git"},"bugs":{"url":"https://github.com/p0deje/hubot-temploy/issues"},"dependencies":{"q":"*","js-yaml":"*"},"peerDependencies":{"hubot":"*"},"devDependencies":{"hubot":"*","coffee-script":"*","mocha":"*","chai":"*","sinon":"*","sinon-chai":"*","temp":"*","hubot-mock-adapter":"*"},"scripts":{"test":"mocha --compilers coffee:coffee-script/register $(find test -name '*_test.coffee' | sort -r)"},"gitHead":"7b736f6c211111c827f1c924d1a526608036f1bc","_id":"hubot-temploy@0.1.4","_shasum":"92d05ceaa5f78d36b815e38fe5b4e9d47c1e6e70","_from":".","_npmVersion":"2.1.17","_nodeVersion":"0.10.35","_npmUser":{"name":"p0deje","email":"p0deje@gmail.com"},"maintainers":[{"name":"p0deje","email":"p0deje@gmail.com"}],"dist":{"shasum":"92d05ceaa5f78d36b815e38fe5b4e9d47c1e6e70","tarball":"http://registry.npmjs.org/hubot-temploy/-/hubot-temploy-0.1.4.tgz"}},"0.2.0":{"name":"hubot-temploy","version":"0.2.0","description":"Hubot script that temporarily deploys pull requests","main":"index.coffee","homepage":"https://github.com/p0deje/hubot-temploy","keywords":["hubot","deploy","github"],"author":{"name":"Alex Rodionov"},"license":"MIT","repository":{"type":"git","url":"git://github.com/p0deje/hubot-temploy.git"},"bugs":{"url":"https://github.com/p0deje/hubot-temploy/issues"},"dependencies":{"q":"*","js-yaml":"*"},"peerDependencies":{"hubot":"*"},"devDependencies":{"hubot":"*","coffee-script":"*","mocha":"*","chai":"*","sinon":"*","sinon-chai":"*","temp":"*","hubot-mock-adapter":"*"},"scripts":{"test":"mocha --compilers coffee:coffee-script/register $(find test -name '*_test.coffee' | sort -r)"},"gitHead":"79a97c005f1bafade1538e79da72fa9653f9df9e","_id":"hubot-temploy@0.2.0","_shasum":"b823ee222d4df39615f5666ea1bd1604b7997b55","_from":".","_npmVersion":"2.1.17","_nodeVersion":"0.10.35","_npmUser":{"name":"p0deje","email":"p0deje@gmail.com"},"maintainers":[{"name":"p0deje","email":"p0deje@gmail.com"}],"dist":{"shasum":"b823ee222d4df39615f5666ea1bd1604b7997b55","tarball":"http://registry.npmjs.org/hubot-temploy/-/hubot-temploy-0.2.0.tgz"}},"0.2.1":{"name":"hubot-temploy","version":"0.2.1","description":"Hubot script that temporarily deploys pull requests","main":"index.coffee","homepage":"https://github.com/p0deje/hubot-temploy","keywords":["hubot","deploy","github"],"author":{"name":"Alex Rodionov"},"license":"MIT","repository":{"type":"git","url":"git://github.com/p0deje/hubot-temploy.git"},"bugs":{"url":"https://github.com/p0deje/hubot-temploy/issues"},"dependencies":{"q":"*","js-yaml":"*"},"peerDependencies":{"hubot":"*"},"devDependencies":{"hubot":"*","coffee-script":"*","mocha":"*","chai":"*","sinon":"*","sinon-chai":"*","temp":"*","hubot-mock-adapter":"*"},"scripts":{"test":"mocha --compilers coffee:coffee-script/register $(find test -name '*_test.coffee' | sort -r)"},"gitHead":"a5f54bf23e91a7567bf6e360c4916331361bd339","_id":"hubot-temploy@0.2.1","_shasum":"2fa1ae4f0da8f0e13a5094d66336b5bb828c97c0","_from":".","_npmVersion":"2.1.17","_nodeVersion":"0.10.35","_npmUser":{"name":"p0deje","email":"p0deje@gmail.com"},"maintainers":[{"name":"p0deje","email":"p0deje@gmail.com"}],"dist":{"shasum":"2fa1ae4f0da8f0e13a5094d66336b5bb828c97c0","tarball":"http://registry.npmjs.org/hubot-temploy/-/hubot-temploy-0.2.1.tgz"}},"0.2.2":{"name":"hubot-temploy","version":"0.2.2","description":"Hubot script that temporarily deploys pull requests","main":"index.coffee","homepage":"https://github.com/p0deje/hubot-temploy","keywords":["hubot","deploy","github"],"author":{"name":"Alex Rodionov"},"license":"MIT","repository":{"type":"git","url":"git://github.com/p0deje/hubot-temploy.git"},"bugs":{"url":"https://github.com/p0deje/hubot-temploy/issues"},"dependencies":{"q":"*","js-yaml":"*"},"peerDependencies":{"hubot":"*"},"devDependencies":{"hubot":"*","coffee-script":"*","mocha":"*","chai":"*","sinon":"*","sinon-chai":"*","temp":"*","hubot-mock-adapter":"*"},"scripts":{"test":"mocha --compilers coffee:coffee-script/register $(find test -name '*_test.coffee' | sort -r)"},"gitHead":"5c8ba90d3d064b80db0ee3546685411302ffa505","_id":"hubot-temploy@0.2.2","_shasum":"749e24a407e9f29ab0f1c9c0903f06c7faee08f8","_from":".","_npmVersion":"2.1.17","_nodeVersion":"0.10.35","_npmUser":{"name":"p0deje","email":"p0deje@gmail.com"},"maintainers":[{"name":"p0deje","email":"p0deje@gmail.com"}],"dist":{"shasum":"749e24a407e9f29ab0f1c9c0903f06c7faee08f8","tarball":"http://registry.npmjs.org/hubot-temploy/-/hubot-temploy-0.2.2.tgz"}},"0.2.3":{"name":"hubot-temploy","version":"0.2.3","description":"Hubot script that temporarily deploys pull requests","main":"index.coffee","homepage":"https://github.com/p0deje/hubot-temploy","keywords":["hubot","deploy","github"],"author":{"name":"Alex Rodionov"},"license":"MIT","repository":{"type":"git","url":"git://github.com/p0deje/hubot-temploy.git"},"bugs":{"url":"https://github.com/p0deje/hubot-temploy/issues"},"dependencies":{"q":"*","js-yaml":"*"},"peerDependencies":{"hubot":"*"},"devDependencies":{"hubot":"*","coffee-script":"*","mocha":"*","chai":"*","sinon":"*","sinon-chai":"*","temp":"*","hubot-mock-adapter":"*"},"scripts":{"test":"mocha --compilers coffee:coffee-script/register $(find test -name '*_test.coffee' | sort -r)"},"gitHead":"d703b9fa7c0b79183bc7f55f5b6a89dc267bab94","_id":"hubot-temploy@0.2.3","_shasum":"7170fbf61c46adc7c97616826ff0dc80fcf8f2a2","_from":".","_npmVersion":"2.1.17","_nodeVersion":"0.10.35","_npmUser":{"name":"p0deje","email":"p0deje@gmail.com"},"maintainers":[{"name":"p0deje","email":"p0deje@gmail.com"}],"dist":{"shasum":"7170fbf61c46adc7c97616826ff0dc80fcf8f2a2","tarball":"http://registry.npmjs.org/hubot-temploy/-/hubot-temploy-0.2.3.tgz"}}},"readme":"# hubot-temploy [![Build Status](https://travis-ci.org/p0deje/hubot-temploy.svg)](https://travis-ci.org/p0deje/hubot-temploy) [![npm version](https://badge.fury.io/js/hubot-temploy.svg)](http://badge.fury.io/js/hubot-temploy)\n\n[Hubot](https://hubot.github.com/) script to temporarily deploy pull requests.\n\n# Install\n\nJust add `hubot-temploy` to your `package.json` and `external-scripts.json`.\n\nYou might also need to install [ngrok](https://ngrok.com/) if you plan to deploy application locally.\n\n# Commands\n\n* `hubot temploys` - list of temployed pull requests\n* `hubot temploy start owner/repo#1` - start temployment of pull request #1 for repository owner/repo\n* `hubot temploy stop owner/repo#1` - stop temployment of pull request #1 for repository owner/repo\n\n# Usage\n\nFirst of all, you need to create `.temploy.yml` configuration file. It should contain `start` and `stop` commands at least:\n\n```yaml\nstart: script/hubot_temploy_start.sh\nstop: script/hubot_temploy_stop.sh\n```\n\nThe start script should do everything necessary for your server to be running (let's pretend you have rails application) and spawn application in the background:\n\n```bash\n#!/bin/bash\ncp config/database.yml.example config/database.yml\nbundle install --path ~/.bundle\nbundle exec rake db:setup\nbundle exec rake assets:precompile RAILS_ENV=development\nbundle exec rails s -d\n```\n\nNow, you can tell hubot to temploy your application pull request:\n\n```\nhubot temploy start owner/repo#1\n```\n\n_where `owner/repo` is the path to your Github repository and `1` is your pull request number_\n\nAfter the script is executed, `hubot-temploy` will start [ngrok](https://ngrok.com/) (by default, on port 3000) and respond with exposed server URL.\n\nEvery 1 minute it will check teployment for HTTP requests. If no request has been made within \"time-to-live\" period (by default, 30 minutes since last request), temployment will be automatically stopped.\n\nTemployment stopping is done using `stop` script from configuration file (in this case it just kills rails process):\n\n```bash\n#!/bin/bash\nkill $(ps ax | grep '[r]ails s' | awk '{print $1}')\n```\n\nIt is also possible to force temployment stop:\n\n```\nhubot temploy stop owner/repo#1\n```\n\nYou can also take a look at [hubot-temploy-example](https://github.com/p0deje/hubot-temploy-example) for a minimal working repository.\n\nOf course, both examples are very simple and do not support parallel temployments (because ports/database are the same), so you might want to find a way to isolate each environment. One of the simplest solutions is to use Vagrant, create new virtual machine in start script and delete it in stop script.\n\n# Configuration\n\nYou can also change a couple of configuration options:\n\n```yaml\n# .temploy.yml\nngrok_command: vagrant ssh -c \"ngrok -log=stdout 3000\" # change ngrok command to use (note that \"-log=stdout\" is mandatory)\nttl: 60 # change time (in minutes) to wait since last HTTP request before stopping\n```\n\n# TODO\n\n1. Make tests less flaky (remove `sort -r` from `npm test`).\n2. Support [hubot-redis-brain](https://github.com/hubot-scripts/hubot-redis-brain).\n","maintainers":[{"name":"p0deje","email":"p0deje@gmail.com"}],"time":{"modified":"2015-03-30T12:57:48.080Z","created":"2015-03-17T05:04:02.989Z","0.1.0":"2015-03-17T05:04:02.989Z","0.1.1":"2015-03-17T05:11:21.017Z","0.1.2":"2015-03-17T06:00:14.023Z","0.1.3":"2015-03-17T06:52:06.630Z","0.1.4":"2015-03-18T05:26:31.877Z","0.2.0":"2015-03-20T04:18:58.893Z","0.2.1":"2015-03-23T12:03:05.312Z","0.2.2":"2015-03-23T17:12:52.921Z","0.2.3":"2015-03-30T12:57:48.080Z"},"homepage":"https://github.com/p0deje/hubot-temploy","keywords":["hubot","deploy","github"],"repository":{"type":"git","url":"git://github.com/p0deje/hubot-temploy.git"},"author":{"name":"Alex Rodionov"},"bugs":{"url":"https://github.com/p0deje/hubot-temploy/issues"},"license":"MIT","readmeFilename":"README.md"}
